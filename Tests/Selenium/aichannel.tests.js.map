{"version":3,"file":"aichannel.tests.js","sourceRoot":"","sources":["../TestFramework/Assert.ts","../TestFramework/TestCase.ts","../TestFramework/TestClass.ts","../TestFramework/PollingAssert.ts","../TestFramework/Common.ts","../../src/Interfaces.ts","../../src/SendBuffer.ts","../../src/EnvelopeCreator.ts","../../src/TelemetryValidation/ITypeValidator.ts","../../src/TelemetryValidation/EventValidator.ts","../../src/TelemetryValidation/TraceValidator.ts","../../src/TelemetryValidation/ExceptionValidator.ts","../../src/TelemetryValidation/MetricValidator.ts","../../src/TelemetryValidation/PageViewPerformanceValidator.ts","../../src/TelemetryValidation/PageViewValidator.ts","../../src/TelemetryValidation/RemoteDepdencyValidator.ts","../../src/Serializer.ts","../../src/Offline.ts","../../src/Sender.ts","../Sender.tests.ts","aichannel.tests.ts"],"names":[],"mappings":"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","sourcesContent":["/// <reference path=\"../External/qunit.d.ts\" />\n\n/** Wrapper around QUnit asserts. This class has two purposes:\n * - Make Assertion methods easy to discover.\n * - Make them consistent with XUnit assertions in the order of the actual and expected parameter values.\n */\nclass Assert {\n    /**\n    * A deep recursive comparison assertion, working on primitive types, arrays, objects, \n    * regular expressions, dates and functions.\n    *\n    * The deepEqual() assertion can be used just like equal() when comparing the value of \n    * objects, such that { key: value } is equal to { key: value }. For non-scalar values, \n    * identity will be disregarded by deepEqual.\n    *\n    * @param expected Known comparison value\n    * @param actual Object or Expression being tested\n    * @param message A short description of the assertion\n    */\n    public static deepEqual(expected: any, actual: any, message?: string): any {\n        return deepEqual(actual, expected, message);\n    }\n\n    /** \n    * A non-strict comparison assertion, roughly equivalent to JUnit assertEquals.\n    *\n    * The equal assertion uses the simple comparison operator (==) to compare the actual \n    * and expected arguments. When they are equal, the assertion passes: any; otherwise, it fails. \n    * When it fails, both actual and expected values are displayed in the test result, \n    * in addition to a given message.\n    * \n    * @param expected Known comparison value\n    * @param actual Expression being tested\n    * @param message A short description of the assertion\n    */\n    public static equal(expected: any, actual: any, message?: string): any {\n        return equal(actual, expected, message);\n    }\n\n    /**\n    * An inverted deep recursive comparison assertion, working on primitive types, \n    * arrays, objects, regular expressions, dates and functions.\n    *\n    * The notDeepEqual() assertion can be used just like equal() when comparing the \n    * value of objects, such that { key: value } is equal to { key: value }. For non-scalar \n    * values, identity will be disregarded by notDeepEqual.\n    * \n    * @param expected Known comparison value\n    * @param actual Object or Expression being tested\n    * @param message A short description of the assertion\n    */\n    public static notDeepEqual(expected: any, actual: any, message?: string): any {\n        return notDeepEqual(actual, expected, message);\n    }\n\n    /**\n    * A non-strict comparison assertion, checking for inequality.\n    *\n    * The notEqual assertion uses the simple inverted comparison operator (!=) to compare \n    * the actual and expected arguments. When they aren't equal, the assertion passes: any; \n    * otherwise, it fails. When it fails, both actual and expected values are displayed \n    * in the test result, in addition to a given message.\n    * \n    * @param expected Known comparison value\n    * @param actual Expression being tested\n    * @param message A short description of the assertion\n    */\n    public static notEqual(expected: any, actual: any, message?: string): any {\n        return notEqual(actual, expected, message);\n    }\n\n    public static notPropEqual(expected: any, actual: any, message?: string): any {\n        return notPropEqual(actual, expected, message);\n    }\n\n    public static propEqual(expected: any, actual: any, message?: string): any {\n        return propEqual(actual, expected, message);\n    }\n\n    /**\n    * A non-strict comparison assertion, checking for inequality.\n    *\n    * The notStrictEqual assertion uses the strict inverted comparison operator (!==) \n    * to compare the actual and expected arguments. When they aren't equal, the assertion \n    * passes: any; otherwise, it fails. When it fails, both actual and expected values are \n    * displayed in the test result, in addition to a given message.\n    * \n    * @param expected Known comparison value\n    * @param actual Expression being tested\n    * @param message A short description of the assertion\n    */\n    public static notStrictEqual(expected: any, actual: any, message?: string): any {\n        return notStrictEqual(actual, expected, message);\n    }\n\n    /**\n    * A boolean assertion, equivalent to CommonJS's assert.ok() and JUnit's assertTrue(). \n    * Passes if the first argument is truthy.\n    *\n    * The most basic assertion in QUnit, ok() requires just one argument. If the argument \n    * evaluates to true, the assertion passes; otherwise, it fails. If a second message \n    * argument is provided, it will be displayed in place of the result.\n    * \n    * @param state Expression being tested\n    * @param message A short description of the assertion\n    */\n    public static ok(state: any, message?: string): any {\n        return ok(state, message);\n    }\n\n    /**\n    * A strict type and value comparison assertion.\n    *\n    * The strictEqual() assertion provides the most rigid comparison of type and value with \n    * the strict equality operator (===)\n    * \n    * @param expected Known comparison value\n    * @param actual Expression being tested\n    * @param message A short description of the assertion\n    */\n    public static strictEqual(expected: any, actual: any, message?: string): any {\n        return strictEqual(actual, expected, message);\n    }\n\n    /**\n    * Assertion to test if a callback throws an exception when run.\n    * \n    * When testing code that is expected to throw an exception based on a specific set of \n    * circumstances, use throws() to catch the error object for testing and comparison.\n    * \n    * @param block Function to execute\n    * @param expected Error Object to compare\n    * @param message A short description of the assertion\n    */\n    public static throws(block: () => any, expected: any, message?: string): any;\n\n    /**\n    * @param block Function to execute\n    * @param message A short description of the assertion\n    */\n    public static throws(block: () => any, message?: string): any;\n\n    public static throws(block: () => any, expected?: any, message?: string): any {\n        return throws(block, expected, message);\n    }\n}","\n/** Defines a test case */\nclass TestCase {\n    /** Name to use for the test case */\n    public name: string;\n\n    /** Test case method */\n    public test: () => void;\n}\n\n\n/** Defines a test case */\ninterface TestCaseAsync {\n    /** Name to use for the test case */\n    name: string;\n\n    /** time to wait after pre before invoking post and calling start() */\n    stepDelay: number;\n\n    /** async steps */\n    steps: Array<() => void>;\n}","/// <reference path=\"../External/sinon.d.ts\" />\n/// <reference path=\"../External/qunit.d.ts\" />\n/// <reference path=\"Assert.ts\" />\n/// <reference path=\"./TestCase.ts\"/>\n\nclass TestClass {\n\n    constructor(name?: string) {\n        QUnit.module(name);\n    }\n\n    public static isPollingStepFlag = \"isPollingStep\";\n\n    /** The instance of the currently running suite. */\n    public static currentTestClass: TestClass;\n\n    /** Turns on/off sinon's syncronous implementation of setTimeout. On by default. */\n    public useFakeTimers: boolean = true;\n\n    /** Turns on/off sinon's fake implementation of XMLHttpRequest. On by default. */\n    public useFakeServer: boolean = true;\n\n    /** Method called before the start of each test method */\n    public testInitialize() {\n    }\n\n    /** Method called after each test method has completed */\n    public testCleanup() {\n    }\n\n    /** Method in which test class intances should call this.testCase(...) to register each of this suite's tests. */\n    public registerTests() {\n    }\n\n    /** Register an async Javascript unit testcase. */\n    public testCaseAsync(testInfo: TestCaseAsync) {\n        if (!testInfo.name) {\n            throw new Error(\"Must specify name in testInfo context in registerTestcase call\");\n        }\n\n        if (isNaN(testInfo.stepDelay)) {\n            throw new Error(\"Must specify 'stepDelay' period between pre and post\");\n        }\n\n        if (!testInfo.steps) {\n            throw new Error(\"Must specify 'steps' to take asynchronously\");\n        }\n\n        // Create a wrapper around the test method so we can do test initilization and cleanup.\n        var testMethod = (assert) => {\n            var done = assert.async();\n\n            // Save off the instance of the currently running suite.\n            TestClass.currentTestClass = this;\n\n            // Run the test.\n            try {\n                this._testStarting();\n\n                var steps = testInfo.steps;\n                var trigger = () => {\n                    if (steps.length) {\n                        var step = steps.shift();\n\n                        // The callback which activates the next test step. \n                        var nextTestStepTrigger = () => {\n                            setTimeout(() => {\n                                trigger();\n                            }, testInfo.stepDelay);\n                        };\n\n                        // There 2 types of test steps - simple and polling.\n                        // Upon completion of the simple test step the next test step will be called.\n                        // In case of polling test step the next test step is passed to the polling test step, and\n                        // it is responsibility of the polling test step to call the next test step.\n                        try {\n                            if (step[TestClass.isPollingStepFlag]) {\n                                step.call(this, nextTestStepTrigger);\n                            } else {\n                                step.call(this);\n                                nextTestStepTrigger.call(this);\n                            }\n                        } catch (e) {\n                            this._testCompleted();\n                            Assert.ok(false, e.toString());\n\n                            // done is QUnit callback indicating the end of the test\n                            done();\n\n                            return;\n                        }\n                    } else {\n                        this._testCompleted();\n\n                        // done is QUnit callback indicating the end of the test\n                        done();\n                    }\n                };\n\n                trigger();\n            } catch (ex) {\n                Assert.ok(false, \"Unexpected Exception: \" + ex);\n                this._testCompleted(true);\n\n                // done is QUnit callback indicating the end of the test\n                done();\n            }\n        };\n\n        // Register the test with QUnit\n        QUnit.test(testInfo.name, testMethod);\n    }\n\n    /** Register a Javascript unit testcase. */\n    public testCase(testInfo: TestCase) {\n        if (!testInfo.name) {\n            throw new Error(\"Must specify name in testInfo context in registerTestcase call\");\n        }\n\n        if (!testInfo.test) {\n            throw new Error(\"Must specify 'test' method in testInfo context in registerTestcase call\");\n        }\n\n        // Create a wrapper around the test method so we can do test initilization and cleanup.\n        var testMethod = () => {\n            // Save off the instance of the currently running suite.\n            TestClass.currentTestClass = this;\n\n            // Run the test.\n            try {\n                this._testStarting();\n\n                testInfo.test.call(this);\n\n                this._testCompleted();\n            }\n            catch (ex) {\n                Assert.ok(false, \"Unexpected Exception: \" + ex);\n                this._testCompleted(true);\n            }\n        };\n\n        // Register the test with QUnit\n        test(testInfo.name, testMethod);\n    }\n\n    /** Called when the test is starting. */\n    private _testStarting() {\n        // Initialize the sandbox similar to what is done in sinon.js \"test()\" override. See note on class.\n        var config = (<any>sinon).getConfig(sinon.config);\n        config.useFakeTimers = this.useFakeTimers;\n        config.useFakeServer = this.useFakeServer;\n\n        config.injectInto = config.injectIntoThis && this || config.injectInto;\n        this.sandbox = sinon.sandbox.create(config);\n        this.server = this.sandbox.server;\n\n        // Allow the derived class to perform test initialization.\n        this.testInitialize();\n    }\n\n    /** Called when the test is completed. */\n    private _testCompleted(failed?: boolean) {\n        if (failed) {\n            // Just cleanup the sandbox since the test has already failed.\n            this.sandbox.restore();\n        }\n        else {\n            // Verify the sandbox and restore.\n            (<any>this.sandbox).verifyAndRestore();\n        }\n\n        this.testCleanup();\n\n        // Clear the instance of the currently running suite.\n        TestClass.currentTestClass = null;\n    }\n\n    /**** Sinon methods and properties ***/\n\n    // These methods and properties are injected by Sinon and will override the implementation here.\n    // These are here purely to make typescript happy.\n    public clock: SinonFakeTimers;\n    public server: SinonFakeServer;\n    public sandbox: SinonSandbox;\n\n    /** Creates an anonymous function that records arguments, this value, exceptions and return values for all calls. */\n    public spy(): SinonSpy;\n    /** Spies on the provided function */\n    public spy(funcToWrap: Function): SinonSpy;\n    /** Creates a spy for object.methodName and replaces the original method with the spy. The spy acts exactly like the original method in all cases. The original method can be restored by calling object.methodName.restore(). The returned spy is the function object which replaced the original method. spy === object.method. */\n    public spy(object: any, methodName: string, func?: Function): SinonSpy;\n    public spy(...args: any[]): SinonSpy { return null; }\n\n    /** Creates an anonymous stub function. */\n    public stub(): SinonStub;\n    /** Stubs all the object's methods. */\n    public stub(object: any): SinonStub;\n    /** Replaces object.methodName with a func, wrapped in a spy. As usual, object.methodName.restore(); can be used to restore the original method. */\n    public stub(object: any, methodName: string, func?: Function): SinonStub;\n    public stub(...args: any[]): SinonStub { return null; }\n\n    /** Creates a mock for the provided object.Does not change the object, but returns a mock object to set expectations on the object's methods. */\n    public mock(object: any): SinonMock { return null; }\n\n    /**** end: Sinon methods and properties ***/\n\n    /** Sends a JSON response to the provided request.\n     * @param request The request to respond to.\n     * @param data Data to respond with.\n     * @param errorCode Optional error code to send with the request, default is 200\n    */\n    public sendJsonResponse(request: SinonFakeXMLHttpRequest, data: any, errorCode?: number) {\n        if (errorCode === undefined) {\n            errorCode = 200;\n        }\n\n        request.respond(\n            errorCode,\n            { \"Content-Type\": \"application/json\" },\n            JSON.stringify(data));\n    }\n\n    protected setUserAgent(userAgent: string) {\n        Object.defineProperty(window.navigator, 'userAgent',\n            {\n                configurable: true,\n                get: function () {\n                    return userAgent;\n                }\n            });\n    }\n}\n\n// Configure Sinon\nsinon.assert.fail = function (msg?) {\n    Assert.ok(false, msg);\n};\n\nsinon.assert.pass = function (assertion) {\n    Assert.ok(assertion, \"sinon assert\");\n};\n\nsinon.config = {\n    injectIntoThis: true,\n    injectInto: null,\n    properties: [\"spy\", \"stub\", \"mock\", \"clock\", \"sandbox\"],\n    useFakeTimers: true,\n    useFakeServer: true\n};\n","/// <reference path=\"../External/qunit.d.ts\" />\n/// <reference path=\"TestClass.ts\" />\n\nclass PollingAssert {\n    /**\n    * Starts polling assertion function for a period of time after which it's considered failed.\n    * @param {() => boolean} assertionFunctionReturnsBoolean - funciton returning true if condition passes and false if condition fails. Assertion will be done on this function's result.\n    * @param {string} assertDescription - message shown with the assertion\n    * @param {number} timeoutSeconds - timeout in seconds after which assertion fails\n    * @param {number} pollIntervalMs - polling interval in milliseconds\n    * @returns {(nextTestStep) => void} callback which will be invoked by the TestClass\n    */\n    public static createPollingAssert(assertionFunctionReturnsBoolean: () => boolean, assertDescription: string, timeoutSeconds: number = 30, pollIntervalMs: number = 500): (nextTestStep) => void {\n        var pollingAssert = (nextTestStep) => {\n            var timeout = new Date(new Date().getTime() + timeoutSeconds * 1000);\n            var polling = () => {\n                if (assertionFunctionReturnsBoolean.apply(this)) {\n                    Assert.ok(true, assertDescription);\n                    nextTestStep();\n                } else if (timeout < new Date()) {\n                    Assert.ok(false, \"assert didn't succeed for \" + timeout + \" seconds: \" + assertDescription);\n                    nextTestStep();\n                } else {\n                    setTimeout(polling, pollIntervalMs);\n                }\n            }\n            setTimeout(polling, pollIntervalMs);\n        }\n\n        pollingAssert[TestClass.isPollingStepFlag] = true;\n\n        return pollingAssert;\n    }\n}\n","/// <reference path=\"../External/sinon.d.ts\" />\n/// <reference path=\"../External/qunit.d.ts\" />\n/// <reference path=\"Assert.ts\" />\n/// <reference path=\"PollingAssert.ts\" />\n/// <reference path=\"TestClass.ts\" />\n/// <reference path=\"TestCase.ts\" />","export interface ISenderConfig {\n    /**\n     * The url to which payloads will be sent\n     */\n    endpointUrl: () => string;\n\n    /**\n    * The JSON format (normal vs line delimited). True means line delimited JSON.\n    */\n    emitLineDelimitedJson: () => boolean;\n\n    /**\n     * The maximum size of a batch in bytes\n     */\n    maxBatchSizeInBytes: () => number;\n\n    /**\n     * The maximum interval allowed between calls to batchInvoke\n     */\n    maxBatchInterval: () => number;\n\n    /**\n     * The master off switch.  Do not send any data if set to TRUE\n     */\n    disableTelemetry: () => boolean;\n\n    /**\n     * Store a copy of a send buffer in the session storage\n     */\n    enableSessionStorageBuffer: () => boolean;\n\n    /**\n     * Is retry handler disabled.\n     * If enabled, retry on 206 (partial success), 408 (timeout), 429 (too many requests), 500 (internal server error) and 503 (service unavailable).\n     */\n    isRetryDisabled: () => boolean;\n\n    isBeaconApiDisabled: () => boolean;\n\n    /**\n     * (Optional) Override the instrumentation key that this channel instance sends to\n     */\n    instrumentationKey: () => string;\n}\n\nexport interface IBackendResponse {\n    /**\n     * Number of items received by the backend\n     */\n    itemsReceived: number;\n\n    /**\n     * Number of items succesfuly accepted by the backend\n     */\n    itemsAccepted: number;\n\n    /**\n     * List of errors for items which were not accepted\n     */\n    errors: IResponseError[];\n\n    /**\n     * App id returned by the backend - not necessary returned, but we don't need it with each response.\n     */\n    appId?: string;\n}\n\nexport interface XDomainRequest extends XMLHttpRequestEventTarget {\n    responseText: string;\n    send(payload: string);\n    open(method: string, url: string);\n}\n\nexport interface IResponseError {\n    index: number;\n    statusCode: number;\n    message: string;\n}\n","import { Util } from '@microsoft/applicationinsights-common';\nimport { IDiagnosticLogger, LoggingSeverity, _InternalMessageId } from '@microsoft/applicationinsights-core-js';\nimport { ISenderConfig } from './Interfaces';\n\nexport interface ISendBuffer {\n    /**\n     * Enqueue the payload\n     */\n    enqueue: (payload: string) => void;\n\n    /**\n     * Returns the number of elements in the buffer\n     */\n    count: () => number;\n\n    /**\n     * Clears the buffer\n     */\n    clear: () => void;\n\n    /**\n     * Returns items stored in the buffer\n     */\n    getItems: () => string[];\n\n    /**\n     * Build a batch of all elements in the payload array\n     */\n    batchPayloads: (payload: string[]) => string;\n\n    /**\n     * Moves items to the SENT_BUFFER.\n     * The buffer holds items which were sent, but we haven't received any response from the backend yet. \n     */\n    markAsSent: (payload: string[]) => void;\n\n    /**\n     * Removes items from the SENT_BUFFER. Should be called on successful response from the backend. \n     */\n    clearSent: (payload: string[]) => void;\n}\n\n/*\n * An array based send buffer. \n */\nexport class ArraySendBuffer implements ISendBuffer {\n    private _config: ISenderConfig;\n    private _buffer: string[];\n\n    constructor(config: ISenderConfig) {\n        this._config = config;\n\n        this._buffer = [];\n    }\n\n    public enqueue(payload: string) {\n        this._buffer.push(payload);\n    }\n\n    public count(): number {\n        return this._buffer.length;\n    }\n\n    public clear() {\n        this._buffer.length = 0;\n    }\n\n    public getItems(): string[] {\n        return this._buffer.slice(0);\n    }\n\n    public batchPayloads(payload: string[]): string {\n        if (payload && payload.length > 0) {\n            var batch = this._config.emitLineDelimitedJson() ?\n                payload.join(\"\\n\") :\n                \"[\" + payload.join(\",\") + \"]\";\n\n            return batch;\n        }\n\n        return null;\n    }\n\n    public markAsSent(payload: string[]) {\n        this.clear();\n    }\n\n    public clearSent(payload: string[]) {\n        // not supported\n    }\n}\n\n/*\n * Session storege buffer holds a copy of all unsent items in the browser session storage.\n */\nexport class SessionStorageSendBuffer implements ISendBuffer {\n    static BUFFER_KEY = \"AI_buffer\";\n    static SENT_BUFFER_KEY = \"AI_sentBuffer\";\n\n    // Maximum number of payloads stored in the buffer. If the buffer is full, new elements will be dropped. \n    static MAX_BUFFER_SIZE = 2000;\n    private _bufferFullMessageSent = false;\n\n    // An in-memory copy of the buffer. A copy is saved to the session storage on enqueue() and clear(). \n    // The buffer is restored in a constructor and contains unsent events from a previous page.\n    private _buffer: string[];\n    private _config: ISenderConfig;\n\n    private _logger: IDiagnosticLogger;\n\n    constructor(logger: IDiagnosticLogger, config: ISenderConfig) {\n        this._logger = logger;\n        this._config = config;\n\n        var bufferItems = this.getBuffer(SessionStorageSendBuffer.BUFFER_KEY);\n        var notDeliveredItems = this.getBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY);\n\n        this._buffer = bufferItems.concat(notDeliveredItems);\n\n        // If the buffer has too many items, drop items from the end.\n        if (this._buffer.length > SessionStorageSendBuffer.MAX_BUFFER_SIZE) {\n            this._buffer.length = SessionStorageSendBuffer.MAX_BUFFER_SIZE;\n        }\n\n        // update DataLossAnalyzer with the number of recovered items\n        // Uncomment if you want to use DataLossanalyzer\n        // DataLossAnalyzer.itemsRestoredFromSessionBuffer = this._buffer.length;\n\n        this.setBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY, []);\n        this.setBuffer(SessionStorageSendBuffer.BUFFER_KEY, this._buffer);\n    }\n\n    public enqueue(payload: string) {\n        if (this._buffer.length >= SessionStorageSendBuffer.MAX_BUFFER_SIZE) {\n            // sent internal log only once per page view\n            if (!this._bufferFullMessageSent) {\n                this._logger.throwInternal(\n                    LoggingSeverity.WARNING,\n                    _InternalMessageId.SessionStorageBufferFull,\n                    \"Maximum buffer size reached: \" + this._buffer.length,\n                    true);\n                this._bufferFullMessageSent = true;\n            }\n            return;\n        }\n\n        this._buffer.push(payload);\n        this.setBuffer(SessionStorageSendBuffer.BUFFER_KEY, this._buffer);\n    }\n\n    public count(): number {\n        return this._buffer.length;\n    }\n\n    public clear() {\n        this._buffer.length = 0;\n        this.setBuffer(SessionStorageSendBuffer.BUFFER_KEY, []);\n        this.setBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY, []);\n\n        this._bufferFullMessageSent = false;\n    }\n\n    public getItems(): string[] {\n        return this._buffer.slice(0)\n    }\n\n    public batchPayloads(payload: string[]): string {\n        if (payload && payload.length > 0) {\n            var batch = this._config.emitLineDelimitedJson() ?\n                payload.join(\"\\n\") :\n                \"[\" + payload.join(\",\") + \"]\";\n\n            return batch;\n        }\n\n        return null;\n    }\n\n    public markAsSent(payload: string[]) {\n        this._buffer = this.removePayloadsFromBuffer(payload, this._buffer);\n        this.setBuffer(SessionStorageSendBuffer.BUFFER_KEY, this._buffer);\n\n        var sentElements = this.getBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY);\n        if (sentElements instanceof Array && payload instanceof Array) {\n            sentElements = sentElements.concat(payload);\n\n            if (sentElements.length > SessionStorageSendBuffer.MAX_BUFFER_SIZE) {\n                // We send telemetry normally. If the SENT_BUFFER is too big we don't add new elements\n                // until we receive a response from the backend and the buffer has free space again (see clearSent method)\n                this._logger.throwInternal(\n                    LoggingSeverity.CRITICAL,\n                    _InternalMessageId.SessionStorageBufferFull,\n                    \"Sent buffer reached its maximum size: \" + sentElements.length,\n                    true);\n\n                sentElements.length = SessionStorageSendBuffer.MAX_BUFFER_SIZE;\n            }\n\n            this.setBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY, sentElements);\n        }\n    }\n\n    public clearSent(payload: string[]) {\n        var sentElements = this.getBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY);\n        sentElements = this.removePayloadsFromBuffer(payload, sentElements);\n\n        this.setBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY, sentElements);\n    }\n\n    private removePayloadsFromBuffer(payloads: string[], buffer: string[]): string[] {\n        var remaining: string[] = [];\n\n        for (var i in buffer) {\n            var contains = false;\n            for (var j in payloads) {\n                if (payloads[j] === buffer[i]) {\n                    contains = true;\n                    break;\n                }\n            }\n\n            if (!contains) {\n                remaining.push(buffer[i]);\n            }\n        };\n\n        return remaining;\n    }\n\n    private getBuffer(key: string): string[] {\n        try {\n            var bufferJson = Util.getSessionStorage(this._logger, key);\n            if (bufferJson) {\n                var buffer: string[] = JSON.parse(bufferJson);\n                if (buffer) {\n                    return buffer;\n                }\n            }\n        } catch (e) {\n            this._logger.throwInternal(LoggingSeverity.CRITICAL,\n                _InternalMessageId.FailedToRestoreStorageBuffer,\n                \" storage key: \" + key + \", \" + Util.getExceptionName(e),\n                { exception: Util.dump(e) });\n        }\n\n        return [];\n    }\n\n    private setBuffer(key: string, buffer: string[]) {\n        try {\n            var bufferJson = JSON.stringify(buffer);\n            Util.setSessionStorage(this._logger, key, bufferJson);\n        } catch (e) {\n            // if there was an error, clear the buffer\n            // telemetry is stored in the _buffer array so we won't loose any items\n            Util.setSessionStorage(this._logger, key, JSON.stringify([]));\n\n            this._logger.throwInternal(LoggingSeverity.WARNING,\n                _InternalMessageId.FailedToSetStorageBuffer,\n                \" storage key: \" + key + \", \" + Util.getExceptionName(e) + \". Buffer cleared\",\n                { exception: Util.dump(e) });\n        }\n    }\n}","import {\n    IEnvelope, Data, Envelope, SampleRate,\n    RemoteDependencyData, Event, Exception,\n    Metric, PageView, Trace, PageViewPerformance, IDependencyTelemetry,\n    IPageViewPerformanceTelemetry, IPageViewTelemetry, CtxTagKeys,\n    UnmappedKeys, AppExtensionKeys, DeviceExtensionKeys,\n    IngestExtKeys, WebExtensionKeys, OSExtKeys, HttpMethod, UserExtensionKeys\n} from '@microsoft/applicationinsights-common';\nimport {\n    ITelemetryItem, CoreUtils,\n    IDiagnosticLogger, LoggingSeverity, _InternalMessageId\n} from '@microsoft/applicationinsights-core-js';\n\nexport const ContextTagKeys: string[] = [\n    \"ai.application.ver\",\n    \"ai.application.build\",\n    \"ai.application.typeId\",\n    \"ai.application.applicationId\",\n    \"ai.application.layer\",\n    \"ai.device.id\",\n    \"ai.device.ip\",\n    \"ai.device.language\",\n    \"ai.device.locale\",\n    \"ai.device.model\",\n    \"ai.device.friendlyName\",\n    \"ai.device.network\",\n    \"ai.device.networkName\",\n    \"ai.device.oemName\",\n    \"ai.device.os\",\n    \"ai.device.osVersion\",\n    \"ai.device.roleInstance\",\n    \"ai.device.roleName\",\n    \"ai.device.screenResolution\",\n    \"ai.device.type\",\n    \"ai.device.machineName\",\n    \"ai.device.vmName\",\n    \"ai.device.browser\",\n    \"ai.device.browserVersion\",\n    \"ai.location.ip\",\n    \"ai.location.country\",\n    \"ai.location.province\",\n    \"ai.location.city\",\n    \"ai.operation.id\",\n    \"ai.operation.name\",\n    \"ai.operation.parentId\",\n    \"ai.operation.rootId\",\n    \"ai.operation.syntheticSource\",\n    \"ai.operation.correlationVector\",\n    \"ai.session.id\",\n    \"ai.session.isFirst\",\n    \"ai.session.isNew\",\n    \"ai.user.accountAcquisitionDate\",\n    \"ai.user.accountId\",\n    \"ai.user.userAgent\",\n    \"ai.user.id\",\n    \"ai.user.storeRegion\",\n    \"ai.user.authUserId\",\n    \"ai.user.anonUserAcquisitionDate\",\n    \"ai.user.authUserAcquisitionDate\",\n    \"ai.cloud.name\",\n    \"ai.cloud.role\",\n    \"ai.cloud.roleVer\",\n    \"ai.cloud.roleInstance\",\n    \"ai.cloud.environment\",\n    \"ai.cloud.location\",\n    \"ai.cloud.deploymentUnit\",\n    \"ai.internal.sdkVersion\",\n    \"ai.internal.agentVersion\",\n    \"ai.internal.nodeName\",\n];\n\n// these two constants are used to filter out properties not needed when trying to extract custom properties and measurements from the incoming payload\nconst baseType: string = \"baseType\";\nconst baseData: string = \"baseData\";\n\nexport abstract class EnvelopeCreator {\n    protected _logger: IDiagnosticLogger;\n\n    abstract Create(logger: IDiagnosticLogger, telemetryItem: ITelemetryItem): IEnvelope;\n\n    protected static extractProperties(data: { [key: string]: any }): { [key: string]: any } {\n        let customProperties: { [key: string]: any } = null;\n        for (let key in data) {\n            if (data.hasOwnProperty(key)) {\n                let value = data[key];\n                if (typeof value !== \"number\") {\n                    if (!customProperties) {\n                        customProperties = {};\n                    }\n                    customProperties[key] = value;\n                }\n            }\n        }\n\n        return customProperties;\n    }\n\n    protected static extractPropsAndMeasurements(data: { [key: string]: any }, properties: { [key: string]: any }, measurements: { [key: string]: any }) {\n        if (!CoreUtils.isNullOrUndefined(data)) {\n            for (let key in data) {\n                if (data.hasOwnProperty(key)) {\n                    let value = data[key];\n                    if (typeof value === \"number\") {\n                        measurements[key] = value;\n                    } else {\n                        properties[key] = value;\n                    }\n                }\n            }\n        }\n    }\n\n    // TODO: Do we want this to take logger as arg or use this._logger as nonstatic?\n    protected static createEnvelope<T>(logger: IDiagnosticLogger, envelopeType: string, telemetryItem: ITelemetryItem, data: Data<T>): IEnvelope {\n        let envelope = new Envelope(logger, data, envelopeType);\n        envelope.iKey = telemetryItem.iKey;\n        let iKeyNoDashes = telemetryItem.iKey.replace(/-/g, \"\");\n        envelope.name = envelope.name.replace(\"{0}\", iKeyNoDashes);\n\n        // extract all extensions from ctx\n        EnvelopeCreator.extractPartAExtensions(telemetryItem, envelope);\n\n        // loop through the envelope tags (extension of Part A) and pick out the ones that should go in outgoing envelope tags\n        if (!telemetryItem.tags) {\n            telemetryItem.tags = [];\n        }\n\n        return envelope;\n    }\n\n    /*\n     * Maps Part A data from CS 4.0\n     */\n    private static extractPartAExtensions(item: ITelemetryItem, env: IEnvelope) {\n        let keysFound = [];\n        let tagKeysfound = [];\n        if (!env.tags) {\n            env.tags = [];\n        }\n\n        if (!item.ctx) {\n            item.ctx = {};\n        }\n\n        if (!item.tags) {\n            item.tags = [];\n        }\n\n        if (item.tags[UnmappedKeys.applicationVersion]) {\n            env.tags[CtxTagKeys.applicationVersion] = item.tags[UnmappedKeys.applicationVersion];\n            tagKeysfound.push(UnmappedKeys.applicationVersion);\n        }\n\n        if (item.tags[UnmappedKeys.applicationBuild]) {\n            env.tags[CtxTagKeys.applicationBuild] = item.tags[UnmappedKeys.applicationBuild];\n            tagKeysfound.push(UnmappedKeys.applicationBuild);\n        }\n\n        if (item.ctx[UserExtensionKeys.authId]) {\n            env.tags[CtxTagKeys.userAuthUserId] = item.ctx[UserExtensionKeys.authId];\n            tagKeysfound.push(UserExtensionKeys.authId);\n        }\n\n        if (item.ctx[UserExtensionKeys.localId]) {\n            env.tags[CtxTagKeys.userId] = item.ctx[UserExtensionKeys.localId];\n            tagKeysfound.push(UserExtensionKeys.localId);\n        }\n\n        if (item.ctx[AppExtensionKeys.sessionId]) {\n            env.tags[CtxTagKeys.sessionId] = item.ctx[AppExtensionKeys.sessionId];\n            keysFound.push(AppExtensionKeys.sessionId);\n        }\n\n        if (item.tags[CtxTagKeys.sessionIsFirst]) {\n            env.tags[CtxTagKeys.sessionIsFirst] = item.tags[CtxTagKeys.sessionIsFirst];\n            tagKeysfound.push(CtxTagKeys.sessionIsFirst);\n        }\n\n        if (item.ctx[DeviceExtensionKeys.localId]) {\n            env.tags[CtxTagKeys.deviceId] = item.ctx[DeviceExtensionKeys.localId];\n            keysFound.push(DeviceExtensionKeys.localId);\n        }\n\n        if (item.ctx[IngestExtKeys.clientIp]) {\n            env.tags[CtxTagKeys.deviceIp] = item.ctx[IngestExtKeys.clientIp];\n            tagKeysfound.push(IngestExtKeys.clientIp);\n        }\n\n        if (item.ctx[WebExtensionKeys.browserLang]) {\n            env.tags[CtxTagKeys.deviceLanguage] = item.ctx[WebExtensionKeys.browserLang];\n            keysFound.push(WebExtensionKeys.browserLang);\n        }\n\n        if (item.tags[UnmappedKeys.deviceLocale]) {\n            env.tags[CtxTagKeys.deviceLocale] = item.tags[UnmappedKeys.deviceLocale];\n            tagKeysfound.push(UnmappedKeys.deviceLocale);\n        }\n\n        if (item.ctx[DeviceExtensionKeys.model] ) {\n            env.tags[CtxTagKeys.deviceModel] = item.ctx[DeviceExtensionKeys.model];\n            keysFound.push(DeviceExtensionKeys.model);\n        }\n\n        if (item.ctx[UnmappedKeys.deviceNetwork]) {\n            env.tags[CtxTagKeys.deviceNetwork] = item.ctx[UnmappedKeys.deviceNetwork];\n            keysFound.push(UnmappedKeys.deviceNetwork);\n        }\n\n        if (item.ctx[UnmappedKeys.deviceOEMName]) {\n            env.tags[CtxTagKeys.deviceOEMName] = item.ctx[UnmappedKeys.deviceOEMName];\n            keysFound.push(UnmappedKeys.deviceOSVersion);\n        }\n\n        if (item.tags[UnmappedKeys.deviceOSVersion]) {\n            env.tags[CtxTagKeys.deviceOSVersion] = item.tags[UnmappedKeys.deviceOSVersion];\n            tagKeysfound.push(UnmappedKeys.deviceOSVersion);\n        }\n\n        if (item.ctx[OSExtKeys.deviceOS]) {\n            env.tags[CtxTagKeys.deviceOS] = item.ctx[OSExtKeys.deviceOS];\n            keysFound.push(OSExtKeys.deviceOS);\n        }\n\n        if (item.ctx[UnmappedKeys.deviceNetwork]) {\n            env.tags[CtxTagKeys.deviceNetwork] = item.ctx[UnmappedKeys.deviceNetwork];\n            keysFound.push(UnmappedKeys.deviceNetwork);\n        }\n\n        if (item.ctx[DeviceExtensionKeys.deviceType]) {\n            env.tags[CtxTagKeys.deviceType] = item.ctx[DeviceExtensionKeys.deviceType];\n            keysFound.push(DeviceExtensionKeys.deviceType);\n        }\n\n        if (item.tags[UnmappedKeys.deviceOSVersion]) {\n            env.tags[CtxTagKeys.deviceOSVersion] = item.tags[UnmappedKeys.deviceOSVersion];\n            tagKeysfound.push(UnmappedKeys.deviceOSVersion);\n        }\n\n        if (item.tags[WebExtensionKeys.screenRes]) {\n            env.tags[CtxTagKeys.deviceScreenResolution] = item.tags[WebExtensionKeys.screenRes];\n            tagKeysfound.push(WebExtensionKeys.screenRes);\n        }\n\n        if (item.tags[SampleRate]) {\n            env.tags.sampleRate = item.tags[SampleRate];\n            tagKeysfound.push(SampleRate);\n        }\n\n        if (item.tags[CtxTagKeys.locationIp]) {\n            env.tags[CtxTagKeys.locationIp] = item.tags[CtxTagKeys.locationIp];\n            tagKeysfound.push(CtxTagKeys.locationIp);\n        }\n\n        if (item.tags[CtxTagKeys.internalSdkVersion]) {\n            env.tags[CtxTagKeys.internalSdkVersion] = item.tags[CtxTagKeys.internalSdkVersion];\n            tagKeysfound.push(CtxTagKeys.internalSdkVersion);\n        }\n\n        if (item.tags[CtxTagKeys.internalAgentVersion]) {\n            env.tags[CtxTagKeys.internalAgentVersion] = item.tags[CtxTagKeys.internalAgentVersion];\n            tagKeysfound.push(CtxTagKeys.internalAgentVersion);\n        }\n\n        if (item.tags[CtxTagKeys.operationRootId]) {\n            env.tags[CtxTagKeys.operationRootId] = item.tags[CtxTagKeys.operationRootId];\n            tagKeysfound.push(CtxTagKeys.operationRootId);\n        }\n\n        if (item.tags[CtxTagKeys.operationSyntheticSource]) {\n            env.tags[CtxTagKeys.operationSyntheticSource] =  item.tags[CtxTagKeys.operationSyntheticSource];\n            tagKeysfound.push(CtxTagKeys.operationSyntheticSource);\n        }\n\n        if (item.tags[CtxTagKeys.operationParentId]) {\n            env.tags[CtxTagKeys.operationParentId] = item.tags[CtxTagKeys.operationParentId];\n            tagKeysfound.push(CtxTagKeys.operationParentId);\n        }\n\n        if (item.tags[CtxTagKeys.operationName]) {\n            env.tags[CtxTagKeys.operationName] = item.tags[CtxTagKeys.operationName];\n            tagKeysfound.push(CtxTagKeys.operationName);\n        }\n\n        if (item.tags[CtxTagKeys.operationId]) {\n            env.tags[CtxTagKeys.operationId] = item.tags[CtxTagKeys.operationId];\n            tagKeysfound.push(CtxTagKeys.operationId);\n        }\n\n        item.tags.forEach(tag => {\n            for (let key in tag) {\n                if (tag.hasOwnProperty(key)) {\n                    if (tagKeysfound.indexOf(tag) < 0) {\n                        if (ContextTagKeys.indexOf(key) >= 0) {\n                                env.tags[key] = tag[key];\n                            }\n                        }\n                    }\n                }\n        });\n    }\n}\n\nexport class DependencyEnvelopeCreator extends EnvelopeCreator {\n    static DependencyEnvelopeCreator = new DependencyEnvelopeCreator();\n\n    Create(logger: IDiagnosticLogger, telemetryItem: ITelemetryItem): IEnvelope {\n        this._logger = logger;\n        if (CoreUtils.isNullOrUndefined(telemetryItem.baseData)) {\n            this._logger.throwInternal(\n                LoggingSeverity.CRITICAL,\n                _InternalMessageId.TelemetryEnvelopeInvalid, \"telemetryItem.baseData cannot be null.\");\n        }\n\n        let customMeasurements = {};\n        let customProperties = {};\n        EnvelopeCreator.extractPropsAndMeasurements(telemetryItem.data, customProperties, customMeasurements);\n        let bd = telemetryItem.baseData as IDependencyTelemetry;\n        if (CoreUtils.isNullOrUndefined(bd)) {\n            logger.warnToConsole(\"Invalid input for dependency data\");\n            return null;\n        }\n\n        let id = bd.id;\n        let absoluteUrl = bd.target;\n        let command = bd.type;\n        let duration = bd.duration;\n        let success = bd.success;\n        let resultCode = bd.responseCode;\n        let method = bd.properties ? bd.properties[HttpMethod] : \"GET\";\n        let baseData = new RemoteDependencyData(logger, id, absoluteUrl, command, duration, success, resultCode, method, customProperties, customMeasurements);\n        let data = new Data<RemoteDependencyData>(RemoteDependencyData.dataType, baseData);\n        return EnvelopeCreator.createEnvelope<RemoteDependencyData>(logger, RemoteDependencyData.envelopeType, telemetryItem, data);\n    }\n}\n\nexport class EventEnvelopeCreator extends EnvelopeCreator {\n    static EventEnvelopeCreator = new EventEnvelopeCreator();\n\n    Create(logger: IDiagnosticLogger, telemetryItem: ITelemetryItem): IEnvelope {\n        this._logger = logger;\n        if (CoreUtils.isNullOrUndefined(telemetryItem.baseData)) {\n            this._logger.throwInternal(\n                LoggingSeverity.CRITICAL,\n                _InternalMessageId.TelemetryEnvelopeInvalid, \"telemetryItem.baseData cannot be null.\");\n        }\n\n        let customProperties = {};\n        let customMeasurements = {};\n        if (telemetryItem.baseType !== Event.dataType) { // if its not a known type, its treated as custom event\n            EnvelopeCreator.extractPropsAndMeasurements(telemetryItem.baseData, customProperties, customMeasurements);\n        }\n\n        EnvelopeCreator.extractPropsAndMeasurements(telemetryItem.data, customProperties, customMeasurements);\n        let eventName = telemetryItem.baseData.name;\n        let baseData = new Event(logger, eventName, customProperties, customMeasurements);\n        let data = new Data<Event>(Event.dataType, baseData);\n        return EnvelopeCreator.createEnvelope<Event>(logger, Event.envelopeType, telemetryItem, data);\n    }\n}\n\nexport class ExceptionEnvelopeCreator extends EnvelopeCreator {\n    static ExceptionEnvelopeCreator = new ExceptionEnvelopeCreator();\n\n    Create(logger: IDiagnosticLogger, telemetryItem: ITelemetryItem): IEnvelope {\n        this._logger = logger;\n        if (CoreUtils.isNullOrUndefined(telemetryItem.baseData)) {\n            this._logger.throwInternal(\n                LoggingSeverity.CRITICAL,\n                _InternalMessageId.TelemetryEnvelopeInvalid, \"telemetryItem.baseData cannot be null.\");\n        }\n\n        let properties = telemetryItem.baseData.properties;\n        let measurements = telemetryItem.baseData.measurements;\n        let exception = telemetryItem.baseData.error;\n        let severityLevel = telemetryItem.baseData.severityLevel;\n        let baseData = new Exception(logger, exception, properties, measurements, severityLevel);\n        let data = new Data<Exception>(Exception.dataType, baseData);\n        return EnvelopeCreator.createEnvelope<Exception>(logger, Exception.envelopeType, telemetryItem, data);\n    }\n}\n\nexport class MetricEnvelopeCreator extends EnvelopeCreator {\n    static MetricEnvelopeCreator = new MetricEnvelopeCreator();\n\n    Create(logger: IDiagnosticLogger, telemetryItem: ITelemetryItem): IEnvelope {\n        this._logger = logger;\n        if (CoreUtils.isNullOrUndefined(telemetryItem.baseData)) {\n            this._logger.throwInternal(\n                LoggingSeverity.CRITICAL,\n                _InternalMessageId.TelemetryEnvelopeInvalid, \"telemetryItem.baseData cannot be null.\");\n        }\n\n        let customProperties = EnvelopeCreator.extractProperties(telemetryItem.data);\n        let name = telemetryItem.baseData.name;\n        let average = telemetryItem.baseData.average;\n        let sampleCount = telemetryItem.baseData.sampleCount;\n        let min = telemetryItem.baseData.min;\n        let max = telemetryItem.baseData.max;\n        let baseData = new Metric(logger, name, average, sampleCount, min, max, customProperties);\n        let data = new Data<Metric>(Metric.dataType, baseData);\n        return EnvelopeCreator.createEnvelope<Metric>(logger, Metric.envelopeType, telemetryItem, data);\n    }\n}\n\nexport class PageViewEnvelopeCreator extends EnvelopeCreator {\n    static PageViewEnvelopeCreator = new PageViewEnvelopeCreator();\n\n    Create(logger: IDiagnosticLogger, telemetryItem: ITelemetryItem): IEnvelope {\n        this._logger = logger;\n        if (CoreUtils.isNullOrUndefined(telemetryItem.baseData)) {\n            this._logger.throwInternal(\n                LoggingSeverity.CRITICAL,\n                _InternalMessageId.TelemetryEnvelopeInvalid, \"telemetryItem.baseData cannot be null.\");\n        }\n\n        // Since duration is not part of the domain properties in Common Schema, extract it from part C\n        let duration = undefined;\n        if (!CoreUtils.isNullOrUndefined(telemetryItem.baseData) &&\n            !CoreUtils.isNullOrUndefined(telemetryItem.baseData.measurements)) {\n            duration = telemetryItem.baseData.measurements.duration;\n            delete telemetryItem.baseData.measurements.duration;\n        }\n\n        let bd = telemetryItem.baseData as IPageViewTelemetry;\n        let name = bd.name;\n        let url = bd.uri;\n        let properties = bd.properties || {};\n        let measurements = bd.measurements || {};\n\n        // refUri is a field that Breeze still does not recognize as part of Part B. For now, put it in Part C until it supports it as a domain property\n        if (!CoreUtils.isNullOrUndefined(bd.refUri)) {\n            properties[\"refUri\"] = bd.refUri;\n        }\n\n        // pageType is a field that Breeze still does not recognize as part of Part B. For now, put it in Part C until it supports it as a domain property\n        if (!CoreUtils.isNullOrUndefined(bd.pageType)) {\n            properties[\"pageType\"] = bd.pageType;\n        }\n\n        // isLoggedIn is a field that Breeze still does not recognize as part of Part B. For now, put it in Part C until it supports it as a domain property\n        if (!CoreUtils.isNullOrUndefined(bd.isLoggedIn)) {\n            properties[\"isLoggedIn\"] = bd.isLoggedIn.toString();\n        }\n\n        // pageTags is a field that Breeze still does not recognize as part of Part B. For now, put it in Part C until it supports it as a domain property\n        if (!CoreUtils.isNullOrUndefined(bd.properties)) {\n            let pageTags = bd.properties;\n            for (let key in pageTags) {\n                if (pageTags.hasOwnProperty(key)) {\n                    properties[key] = pageTags[key];\n                }\n            }\n        }\n\n        let baseData = new PageView(logger, name, url, duration, properties, measurements);\n        let data = new Data<PageView>(PageView.dataType, baseData);\n        return EnvelopeCreator.createEnvelope<PageView>(logger, PageView.envelopeType, telemetryItem, data);\n    }\n}\n\nexport class PageViewPerformanceEnvelopeCreator extends EnvelopeCreator {\n    static PageViewPerformanceEnvelopeCreator = new PageViewPerformanceEnvelopeCreator();\n\n    Create(logger: IDiagnosticLogger, telemetryItem: ITelemetryItem): IEnvelope {\n        this._logger = logger;\n        if (CoreUtils.isNullOrUndefined(telemetryItem.baseData)) {\n            this._logger.throwInternal(\n                LoggingSeverity.CRITICAL,\n                _InternalMessageId.TelemetryEnvelopeInvalid, \"telemetryItem.baseData cannot be null.\");\n        }\n\n        const bd = telemetryItem.baseData as IPageViewPerformanceTelemetry;\n        let name = bd.name;\n        let url = bd.url;\n        let properties = bd.properties;\n        let measurements = bd.measurements;\n        let baseData = new PageViewPerformance(logger, name, url, undefined, properties, measurements);\n        let data = new Data<PageViewPerformance>(PageViewPerformance.dataType, baseData);\n        return EnvelopeCreator.createEnvelope<PageViewPerformance>(logger, PageViewPerformance.envelopeType, telemetryItem, data);\n    }\n}\n\nexport class TraceEnvelopeCreator extends EnvelopeCreator {\n    static TraceEnvelopeCreator = new TraceEnvelopeCreator();\n\n    Create(logger: IDiagnosticLogger, telemetryItem: ITelemetryItem): IEnvelope {\n        this._logger = logger;\n        if (CoreUtils.isNullOrUndefined(telemetryItem.baseData)) {\n            this._logger.throwInternal(\n                LoggingSeverity.CRITICAL,\n                _InternalMessageId.TelemetryEnvelopeInvalid, \"telemetryItem.baseData cannot be null.\");\n        }\n\n        let message = telemetryItem.baseData.message;\n        let severityLevel = telemetryItem.baseData.severityLevel;\n        let customProperties = EnvelopeCreator.extractProperties(telemetryItem.data);\n        let baseData = new Trace(logger, message, severityLevel, customProperties);\n        let data = new Data<Trace>(Trace.dataType, baseData);\n        return EnvelopeCreator.createEnvelope<Trace>(logger, Trace.envelopeType, telemetryItem, data);\n    }\n}\n","import { ITelemetryItem } from '@microsoft/applicationinsights-core-js';\n\nexport interface ITypeValidator {\n    Validate(item: ITelemetryItem): boolean;\n}","import { ITypeValidator } from './ITypeValidator';\nimport { ITelemetryItem } from '@microsoft/applicationinsights-core-js';\n\nexport class EventValidator implements ITypeValidator {\n\n    static EventValidator = new EventValidator();\n\n    public Validate(item: ITelemetryItem): boolean {\n        /* TODO re-enable once design of iTelemetryItem is finalized. Task used to track this:\n        https://mseng.visualstudio.com/AppInsights/_workitems/edit/1310871\n\n        // verify system properties has a ver field\n        if (!item.sytemProperties || !item.sytemProperties[\"ver\"]) {\n            return false;\n        }\n        \n        if (!item.domainProperties || !item.domainProperties[\"name\"]) {\n            return false;\n        }\n        */\n        return true;\n    }\n}","import { ITypeValidator } from './ITypeValidator';\nimport { ITelemetryItem } from '@microsoft/applicationinsights-core-js';\n\nexport class TraceValidator implements ITypeValidator {\n    static TraceValidator = new TraceValidator();\n\n    public Validate(item: ITelemetryItem): boolean {\n        /* TODO re-enable once design of iTelemetryItem is finalized. Task used to track this:\n         https://mseng.visualstudio.com/AppInsights/_workitems/edit/1310871\n\n        // verify system properties has a ver field\n        if (!item.sytemProperties || \n            !item.sytemProperties[\"ver\"]) {\n            return false;\n        }\n        \n        if (!item.domainProperties || \n            !item.domainProperties[\"message\"] || \n            !item.domainProperties[\"severityLevel\"]) {\n            return false;\n        }\n        */\n        return true;\n    }\n}","import { ITypeValidator } from './ITypeValidator';\nimport { ITelemetryItem } from '@microsoft/applicationinsights-core-js';\n\nexport class ExceptionValidator implements ITypeValidator {\n    static ExceptionValidator = new ExceptionValidator();\n\n    Validate(item: ITelemetryItem): boolean {\n        /* TODO re-enable once design of iTelemetryItem is finalized. Task used to track this:\n         https://mseng.visualstudio.com/AppInsights/_workitems/edit/1310871\n\n        // verify system properties has a ver field\n        if (!item.sytemProperties ||\n            !item.sytemProperties[\"ver\"]) {\n            return false;\n        }\n\n        if (!item.domainProperties ||\n            !item.domainProperties[\"exceptions\"] ||\n            !ExceptionValidator._validateExceptions(item.domainProperties[\"exceptions\"])) {\n            return false;\n        }\n        */\n        return true;\n    }\n\n    // TODO implement validation of exceptions\n    private static _validateExceptions(exceptions: any[]): boolean {\n        // typeName\n        // message\n        // parsedStack\n        // stack\n        // hasFullStack\n        return true;\n    }\n}","import { ITypeValidator } from './ITypeValidator';\nimport { ITelemetryItem } from '@microsoft/applicationinsights-core-js';\n\nexport class MetricValidator implements ITypeValidator {\n    static MetricValidator = new MetricValidator();\n\n    Validate(event: ITelemetryItem): boolean {\n        return true;\n    }\n}","import { ITypeValidator } from './ITypeValidator';\nimport { ITelemetryItem } from '@microsoft/applicationinsights-core-js';\n\nexport class PageViewPerformanceValidator implements ITypeValidator {\n    static PageViewPerformanceValidator = new PageViewPerformanceValidator();\n\n    public Validate(item: ITelemetryItem): boolean {\n        /* TODO re-enable once design of iTelemetryItem is finalized. Task used to track this:\n         https://mseng.visualstudio.com/AppInsights/_workitems/edit/1310871\n        \n        // verify system properties has a ver field\n        if (!item.sytemProperties ||\n            !item.sytemProperties[\"ver\"]) {\n            return false;\n        }\n\n        if (!item.domainProperties ||\n            !item.domainProperties[\"domProcessing\"] ||\n            !item.domainProperties[\"duration\"] ||\n            !item.domainProperties[\"name\"] ||\n            !item.domainProperties[\"networkConnect\"] ||\n            !item.domainProperties[\"perfTotal\"] ||\n            !item.domainProperties[\"receivedResponse\"] ||\n            !item.domainProperties[\"sentRequest\"] ||\n            !item.domainProperties[\"url\"]) {\n            return false;\n        }\n        */\n        return true;\n    }\n}","import { ITypeValidator } from './ITypeValidator';\nimport { ITelemetryItem } from '@microsoft/applicationinsights-core-js';\n\nexport class PageViewValidator implements ITypeValidator {\n    static PageViewValidator = new PageViewValidator();\n\n    public Validate(item: ITelemetryItem): boolean {\n        /* TODO re-enable once design of iTelemetryItem is finalized. Task used to track this:\n         https://mseng.visualstudio.com/AppInsights/_workitems/edit/1310871\n\n        // verify system properties has a ver field\n        if (!item.sytemProperties ||\n            !item.sytemProperties[\"ver\"]) {\n            return false;\n        }\n\n        if (!item.domainProperties ||\n            !item.domainProperties[\"id\"] ||\n            !item.domainProperties[\"name\"] ||\n            !item.domainProperties[\"duration\"] ||\n            !item.domainProperties[\"url\"]) {\n            return false;\n        }\n        */\n        return true;\n    }\n}","import { ITypeValidator } from './ITypeValidator';\nimport { ITelemetryItem } from '@microsoft/applicationinsights-core-js';\n\nexport class RemoteDepdencyValidator implements ITypeValidator {\n    static RemoteDepdencyValidator = new RemoteDepdencyValidator();\n\n    public Validate(item: ITelemetryItem): boolean {\n        /* TODO re-enable once design of iTelemetryItem is finalized. Task used to track this:\n         https://mseng.visualstudio.com/AppInsights/_workitems/edit/1310871\n\n        // verify system properties has a ver field\n        if (!item.sytemProperties ||\n            !item.sytemProperties[\"ver\"]) {\n            return false;\n        }\n\n        if (!item.domainProperties ||\n            !item.domainProperties[\"id\"] ||\n            !item.domainProperties[\"name\"] ||\n            !item.domainProperties[\"resultCode\"] ||\n            !item.domainProperties[\"duration\"] ||\n            !item.domainProperties[\"success\"] ||\n            !item.domainProperties[\"data\"] ||\n            !item.domainProperties[\"target\"] ||\n            !item.domainProperties[\"type\"]) {\n            return false;\n        }\n        */\n        return true;\n    }\n}","import { Util, ISerializable, FieldType } from '@microsoft/applicationinsights-common';\nimport { IDiagnosticLogger, LoggingSeverity, _InternalMessageId } from '@microsoft/applicationinsights-core-js';\n\nexport class Serializer {\n\n    private _logger: IDiagnosticLogger;\n\n    constructor(logger: IDiagnosticLogger) {\n        this._logger = logger;\n    }\n\n    /**\n     * Serializes the current object to a JSON string.\n     */\n    public serialize(input: ISerializable): string {\n        var output = this._serializeObject(input, \"root\");\n        return JSON.stringify(output);\n    }\n\n    private _serializeObject(source: ISerializable, name: string): any {\n        var circularReferenceCheck = \"__aiCircularRefCheck\";\n        var output = {};\n\n        if (!source) {\n            this._logger.throwInternal(LoggingSeverity.CRITICAL, _InternalMessageId.CannotSerializeObject, \"cannot serialize object because it is null or undefined\", { name: name }, true);\n            return output;\n        }\n\n        if (source[circularReferenceCheck]) {\n            this._logger.throwInternal(LoggingSeverity.WARNING, _InternalMessageId.CircularReferenceDetected, \"Circular reference detected while serializing object\", { name: name }, true);\n            return output;\n        }\n\n        if (!source.aiDataContract) {\n            // special case for measurements/properties/tags\n            if (name === \"measurements\") {\n                output = this._serializeStringMap(source, \"number\", name);\n            } else if (name === \"properties\") {\n                output = this._serializeStringMap(source, \"string\", name);\n            } else if (name === \"tags\") {\n                output = this._serializeStringMap(source, \"string\", name);\n            } else if (Util.isArray(source)) {\n                output = this._serializeArray(<any>source, name);\n            } else {\n                this._logger.throwInternal(LoggingSeverity.WARNING, _InternalMessageId.CannotSerializeObjectNonSerializable, \"Attempting to serialize an object which does not implement ISerializable\", { name: name }, true);\n\n                try {\n                    // verify that the object can be stringified\n                    JSON.stringify(source);\n                    output = source;\n                } catch (e) {\n                    // if serialization fails return an empty string\n                    this._logger.throwInternal(LoggingSeverity.CRITICAL, _InternalMessageId.CannotSerializeObject, (e && typeof e.toString === 'function') ? e.toString() : \"Error serializing object\", null, true);\n                }\n            }\n\n            return output;\n        }\n\n        source[circularReferenceCheck] = true;\n        for (var field in source.aiDataContract) {\n\n            var contract = source.aiDataContract[field];\n            var isRequired = (typeof contract === \"function\") ? (contract() & FieldType.Required) : (contract & FieldType.Required);\n            var isHidden = (typeof contract === \"function\") ? (contract() & FieldType.Hidden) : (contract & FieldType.Hidden);\n            var isArray = contract & FieldType.Array;\n\n            var isPresent = source[field] !== undefined;\n            var isObject = typeof source[field] === \"object\" && source[field] !== null;\n\n            if (isRequired && !isPresent && !isArray) {\n                this._logger.throwInternal(\n                    LoggingSeverity.CRITICAL,\n                    _InternalMessageId.MissingRequiredFieldSpecification,\n                    \"Missing required field specification. The field is required but not present on source\",\n                    { field: field, name: name });\n\n                // If not in debug mode, continue and hope the error is permissible\n                continue;\n            }\n\n            if (isHidden) {\n                // Don't serialize hidden fields\n                continue;\n            }\n\n            var value;\n            if (isObject) {\n                if (isArray) {\n                    // special case; resurse on each object in the source array\n                    value = this._serializeArray(source[field], field);\n                } else {\n                    // recurse on the source object in this field\n                    value = this._serializeObject(source[field], field);\n                }\n            } else {\n                // assign the source field to the output even if undefined or required\n                value = source[field];\n            }\n\n            // only emit this field if the value is defined\n            if (value !== undefined) {\n                output[field] = value;\n            }\n        }\n\n        delete source[circularReferenceCheck];\n        return output;\n    }\n\n    private _serializeArray(sources: Array<ISerializable>, name: string): Array<any> {\n        var output = undefined;\n\n        if (!!sources) {\n            if (!Util.isArray(sources)) {\n                this._logger.throwInternal(\n                    LoggingSeverity.CRITICAL,\n                    _InternalMessageId.ItemNotInArray,\n                    \"This field was specified as an array in the contract but the item is not an array.\\r\\n\",\n                    { name: name }, true);\n            } else {\n                output = [];\n                for (var i = 0; i < sources.length; i++) {\n                    var source = sources[i];\n                    var item = this._serializeObject(source, name + \"[\" + i + \"]\");\n                    output.push(item);\n                }\n            }\n        }\n\n        return output;\n    }\n\n    private _serializeStringMap(map, expectedType, name) {\n        var output = undefined;\n        if (map) {\n            output = {};\n            for (var field in map) {\n                var value = map[field];\n                if (expectedType === \"string\") {\n                    if (value === undefined) {\n                        output[field] = \"undefined\";\n                    } else if (value === null) {\n                        output[field] = \"null\";\n                    } else if (!value.toString) {\n                        output[field] = \"invalid field: toString() is not defined.\";\n                    }\n                    else {\n                        output[field] = value.toString();\n                    }\n                }\n                else if (expectedType === \"number\") {\n                    if (value === undefined) {\n                        output[field] = \"undefined\";\n                    } else if (value === null) {\n                        output[field] = \"null\";\n                    } else {\n                        var num = parseFloat(value);\n                        if (isNaN(num)) {\n                            output[field] = \"NaN\";\n                        }\n                        else {\n                            output[field] = num;\n                        }\n                    }\n                }\n                else {\n                    output[field] = \"invalid field: \" + name + \" is of unknown type.\";\n                    this._logger.throwInternal(LoggingSeverity.CRITICAL, output[field], null, true);\n                }\n            }\n        }\n\n        return output;\n    }\n}","/**\n * @description Monitors browser for offline events\n * @export default - Offline: Static instance of OfflineListener\n * @class OfflineListener\n */\nexport class OfflineListener {\n    public static Offline = new OfflineListener;\n    private _onlineStatus: boolean = true;\n    public isListening: boolean;\n\n    private _setOnline() {\n        this._onlineStatus = true;\n    }\n    private _setOffline() {\n        this._onlineStatus = false;\n    }\n\n    constructor() {\n        try {\n            if (typeof window === 'undefined') {\n                this.isListening = false;\n            } else if (window && window.addEventListener) {\n                window.addEventListener('online', this._setOnline.bind(this), false);\n                window.addEventListener('offline', this._setOffline.bind(this), false);\n                this.isListening = true;\n            } else if (document && document.body) {\n                (<any>document.body).ononline = this._setOnline.bind(this);\n                (<any>document.body).onoffline = this._setOffline.bind(this)\n                this.isListening = true;\n            } else if (document){\n                (<any>document).ononline = this._setOnline.bind(this);\n                (<any>document).onoffline = this._setOffline.bind(this)\n                this.isListening = true;\n            } else {\n                // Could not find a place to add event listener\n                this.isListening = false;\n            }\n        } catch (e) {\n\n            //this makes react-native less angry\n            this.isListening = false;\n        }\n    }\n\n    public isOnline(): boolean {\n        if (this.isListening) {\n            return this._onlineStatus\n        } else if (navigator) {\n            return navigator.onLine;\n        } else {\n            // Cannot determine online status - report as online\n            return true;\n        }\n    }\n\n    public isOffline(): boolean {\n        return !this.isOnline();\n    }\n}\n\nexport const Offline = OfflineListener.Offline;\n","import { ISenderConfig, XDomainRequest as IXDomainRequest, IBackendResponse } from './Interfaces';\nimport { ISendBuffer, SessionStorageSendBuffer, ArraySendBuffer } from './SendBuffer';\nimport {\n    EnvelopeCreator, DependencyEnvelopeCreator, EventEnvelopeCreator,\n    ExceptionEnvelopeCreator, MetricEnvelopeCreator, PageViewEnvelopeCreator,\n    PageViewPerformanceEnvelopeCreator, TraceEnvelopeCreator\n} from './EnvelopeCreator';\nimport { EventValidator } from './TelemetryValidation/EventValidator';\nimport { TraceValidator } from './TelemetryValidation/TraceValidator';\nimport { ExceptionValidator } from './TelemetryValidation/ExceptionValidator';\nimport { MetricValidator } from './TelemetryValidation/MetricValidator';\nimport { PageViewPerformanceValidator } from './TelemetryValidation/PageViewPerformanceValidator';\nimport { PageViewValidator } from './TelemetryValidation/PageViewValidator';\nimport { RemoteDepdencyValidator } from './TelemetryValidation/RemoteDepdencyValidator';\nimport { Serializer } from './Serializer'; // todo move to channel\nimport {\n    DisabledPropertyName, RequestHeaders, Util,\n    IEnvelope, PageView, Event,\n    Trace, Exception, Metric,\n    PageViewPerformance, RemoteDependencyData,\n    IChannelControlsAI,\n    ConfigurationManager, IConfig,\n    ProcessLegacy\n} from '@microsoft/applicationinsights-common';\nimport {\n    ITelemetryPlugin, ITelemetryItem, IConfiguration,\n    _InternalMessageId, LoggingSeverity, IDiagnosticLogger, IAppInsightsCore, IPlugin,\n} from '@microsoft/applicationinsights-core-js';\nimport { CoreUtils } from '@microsoft/applicationinsights-core-js';\nimport { Offline } from './Offline';\n\ndeclare var XDomainRequest: {\n    prototype: IXDomainRequest;\n    new(): IXDomainRequest;\n};\n\nexport class Sender implements IChannelControlsAI {\n    public priority: number = 201;\n\n    public identifier: string;\n\n    public pause(): void {\n        throw new Error(\"Method not implemented.\");\n    }\n\n    public resume(): void {\n        throw new Error(\"Method not implemented.\");\n    }\n\n    public flush() {\n        try {\n            this.triggerSend();\n        } catch (e) {\n            this._logger.throwInternal(LoggingSeverity.CRITICAL,\n                _InternalMessageId.FlushFailed,\n                \"flush failed, telemetry will not be collected: \" + Util.getExceptionName(e),\n                { exception: Util.dump(e) });\n        }\n    }\n\n    public teardown(): void {\n        throw new Error(\"Method not implemented.\");\n    }\n\n    /**\n     * The configuration for this sender instance\n     */\n    public _config: ISenderConfig;\n\n    /**\n     * A method which will cause data to be send to the url\n     */\n    public _sender: (payload: string[], isAsync: boolean) => void;\n\n    /**\n     * A send buffer object\n     */\n    public _buffer: ISendBuffer;\n\n    /**\n     * AppId of this component parsed from some backend response.\n     */\n    public _appId: string;\n\n    /**\n     * Whether XMLHttpRequest object is supported. Older version of IE (8,9) do not support it.\n     */\n    public _XMLHttpRequestSupported: boolean = false;\n\n    /**\n     * How many times in a row a retryable error condition has occurred.\n     */\n    private _consecutiveErrors: number;\n\n    /**\n     * The time to retry at in milliseconds from 1970/01/01 (this makes the timer calculation easy).\n     */\n    private _retryAt: number;\n\n    /**\n     * The time of the last send operation.\n     */\n    private _lastSend: number;\n\n    /**\n     * Handle to the timer for delayed sending of batches of data.\n     */\n    private _timeoutHandle: any;\n\n    private _nextPlugin: ITelemetryPlugin;\n\n    private _logger: IDiagnosticLogger;\n    private _serializer: Serializer;\n\n    constructor() {\n        this.identifier = \"AppInsightsChannelPlugin\"\n    }\n\n    public initialize(config: IConfiguration & IConfig, core: IAppInsightsCore, extensions: IPlugin[]) :void {\n        this._logger = core.logger;\n        this._serializer = new Serializer(core.logger);\n\n        this._consecutiveErrors = 0;\n        this._retryAt = null;\n        this._lastSend = 0;\n        this._sender = null;\n        const defaultConfig = Sender._getDefaultAppInsightsChannelConfig();\n        this._config = Sender._getEmptyAppInsightsChannelConfig();\n        for (let field in defaultConfig) {\n            this._config[field] = () => ConfigurationManager.getConfig(config, field, this.identifier, defaultConfig[field]());\n        }\n\n        this._buffer = (this._config.enableSessionStorageBuffer && Util.canUseSessionStorage())\n            ? new SessionStorageSendBuffer(this._logger, this._config) : new ArraySendBuffer(this._config);\n\n        if (!this._config.isBeaconApiDisabled() && Util.IsBeaconApiSupported()) {\n            this._sender = this._beaconSender;\n        } else {\n            if (typeof XMLHttpRequest != \"undefined\") {\n                var testXhr = new XMLHttpRequest();\n                if (\"withCredentials\" in testXhr) {\n                    this._sender = this._xhrSender;\n                    this._XMLHttpRequestSupported = true;\n                } else if (typeof XDomainRequest !== \"undefined\") {\n                    this._sender = this._xdrSender; //IE 8 and 9\n                }\n            }\n        }\n    }\n\n    public processTelemetry(telemetryItem: ITelemetryItem) {\n        try {\n            // if master off switch is set, don't send any data\n            if (this._config.disableTelemetry()) {\n                // Do not send/save data\n                return;\n            }\n\n            // validate input\n            if (!telemetryItem) {\n                this._logger.throwInternal(LoggingSeverity.CRITICAL, _InternalMessageId.CannotSendEmptyTelemetry, \"Cannot send empty telemetry\");\n                return;\n            }\n\n            // ensure a sender was constructed\n            if (!this._sender) {\n                this._logger.throwInternal(LoggingSeverity.CRITICAL, _InternalMessageId.SenderNotInitialized, \"Sender was not initialized\");\n                return;\n            }\n\n            // first we need to validate that the envelope passed down is valid\n            let isValid: boolean = Sender._validate(telemetryItem);\n            if (!isValid) {\n                this._logger.throwInternal(LoggingSeverity.CRITICAL, _InternalMessageId.TelemetryEnvelopeInvalid, \"Invalid telemetry envelope\");\n                return;\n            }\n\n            // construct an envelope that Application Insights endpoint can understand\n            let aiEnvelope = Sender.constructEnvelope(telemetryItem, this._config.instrumentationKey(), this._logger);\n            if (!aiEnvelope) {\n                this._logger.throwInternal(LoggingSeverity.CRITICAL, _InternalMessageId.CreateEnvelopeError, \"Unable to create an AppInsights envelope\");\n                return;\n            }\n\n            let doNotSendItem = false;\n            // this is for running in legacy mode, where customer may already have a custom initializer present\n            if (telemetryItem.tags && telemetryItem.tags[ProcessLegacy]) {\n                telemetryItem.tags[ProcessLegacy].forEach((callBack: (env: IEnvelope) => boolean | void) => {\n                    try {\n                        if (callBack && callBack(aiEnvelope) === false) {\n                            doNotSendItem = true;\n                            this._logger.warnToConsole(\"Telemetry processor check returns false\");\n                        }\n                    } catch (e) {\n                        // log error but dont stop executing rest of the telemetry initializers\n                        // doNotSendItem = true;\n                        this._logger.throwInternal(\n                            LoggingSeverity.CRITICAL, _InternalMessageId.TelemetryInitializerFailed, \"One of telemetry initializers failed, telemetry item will not be sent: \" + Util.getExceptionName(e),\n                            { exception: Util.dump(e) }, true);\n                    }\n                });\n\n                delete telemetryItem.tags[ProcessLegacy];\n            }\n            if (doNotSendItem) {\n                return; // do not send, no need to execute next plugin\n            }\n\n            // check if the incoming payload is too large, truncate if necessary\n            let payload: string = this._serializer.serialize(aiEnvelope);\n\n            // flush if we would exceed the max-size limit by adding this item\n            var bufferPayload = this._buffer.getItems();\n            var batch = this._buffer.batchPayloads(bufferPayload);\n\n            if (batch && (batch.length + payload.length > this._config.maxBatchSizeInBytes())) {\n                this.triggerSend();\n            }\n\n            // enqueue the payload\n            this._buffer.enqueue(payload);\n\n            // ensure an invocation timeout is set\n            this._setupTimer();\n\n        } catch (e) {\n            this._logger.throwInternal(\n                LoggingSeverity.WARNING,\n                _InternalMessageId.FailedAddingTelemetryToBuffer,\n                \"Failed adding telemetry to the sender's buffer, some telemetry will be lost: \" + Util.getExceptionName(e),\n                { exception: Util.dump(e) });\n        }\n\n        // hand off the telemetry item to the next plugin\n        if (!CoreUtils.isNullOrUndefined(this._nextPlugin)) {\n            this._nextPlugin.processTelemetry(telemetryItem);\n        }\n    }\n\n    public setNextPlugin(next: ITelemetryPlugin) {\n        this._nextPlugin = next;\n    }\n\n    /**\n     * xhr state changes\n     */\n    public _xhrReadyStateChange(xhr: XMLHttpRequest, payload: string[], countOfItemsInPayload: number) {\n        if (xhr.readyState === 4) {\n            var response: IBackendResponse = null;\n            if (!this._appId) {\n                response = this._parseResponse(xhr.responseText || xhr.response);\n                if (response && response.appId) {\n                    this._appId = response.appId;\n                }\n            }\n\n            if ((xhr.status < 200 || xhr.status >= 300) && xhr.status !== 0) {\n                if (!this._config.isRetryDisabled() && this._isRetriable(xhr.status)) {\n                    this._resendPayload(payload);\n\n                    this._logger.throwInternal(\n                        LoggingSeverity.WARNING,\n                        _InternalMessageId.TransmissionFailed, \". \" +\n                        \"Response code \" + xhr.status + \". Will retry to send \" + payload.length + \" items.\");\n                } else {\n                    this._onError(payload, this._formatErrorMessageXhr(xhr));\n                }\n            } else if (Offline.isOffline()) { // offline\n                // Note: Don't check for staus == 0, since adblock gives this code\n                if (!this._config.isRetryDisabled()) {\n                    const offlineBackOffMultiplier = 10; // arbritrary number\n                    this._resendPayload(payload, offlineBackOffMultiplier);\n\n                    this._logger.throwInternal(\n                        LoggingSeverity.WARNING,\n                        _InternalMessageId.TransmissionFailed, `. Offline - Response Code: ${xhr.status}. Offline status: ${Offline.isOffline()}. Will retry to send ${payload.length} items.`);\n                }\n            } else {\n                if (xhr.status === 206) {\n                    if (!response) {\n                        response = this._parseResponse(xhr.responseText || xhr.response);\n                    }\n\n                    if (response && !this._config.isRetryDisabled()) {\n                        this._onPartialSuccess(payload, response);\n                    } else {\n                        this._onError(payload, this._formatErrorMessageXhr(xhr));\n                    }\n                } else {\n                    this._consecutiveErrors = 0;\n                    this._onSuccess(payload, countOfItemsInPayload);\n                }\n            }\n        }\n    }\n\n    /**\n     * Immediately send buffered data\n     * @param async {boolean} - Indicates if the events should be sent asynchronously\n     */\n    public triggerSend(async = true) {\n        try {\n            // Send data only if disableTelemetry is false\n            if (!this._config.disableTelemetry()) {\n\n                if (this._buffer.count() > 0) {\n                    var payload = this._buffer.getItems();\n\n                    // invoke send\n                    this._sender(payload, async);\n                }\n\n                // update lastSend time to enable throttling\n                this._lastSend = +new Date;\n            } else {\n                this._buffer.clear();\n            }\n\n            clearTimeout(this._timeoutHandle);\n            this._timeoutHandle = null;\n            this._retryAt = null;\n        } catch (e) {\n            /* Ignore this error for IE under v10 */\n            if (!Util.getIEVersion() || Util.getIEVersion() > 9) {\n                this._logger.throwInternal(\n                    LoggingSeverity.CRITICAL,\n                    _InternalMessageId.TransmissionFailed,\n                    \"Telemetry transmission failed, some telemetry will be lost: \" + Util.getExceptionName(e),\n                    { exception: Util.dump(e) });\n            }\n        }\n    }\n\n    /**\n     * error handler\n     */\n    public _onError(payload: string[], message: string, event?: ErrorEvent) {\n        this._logger.throwInternal(\n            LoggingSeverity.WARNING,\n            _InternalMessageId.OnError,\n            \"Failed to send telemetry.\",\n            { message: message });\n\n        this._buffer.clearSent(payload);\n    }\n\n    /**\n     * partial success handler\n     */\n    public _onPartialSuccess(payload: string[], results: IBackendResponse) {\n        var failed = [];\n        var retry = [];\n\n        // Iterate through the reversed array of errors so that splicing doesn't have invalid indexes after the first item.\n        var errors = results.errors.reverse();\n        for (var error of errors) {\n            var extracted = payload.splice(error.index, 1)[0];\n            if (this._isRetriable(error.statusCode)) {\n                retry.push(extracted);\n            } else {\n                // All other errors, including: 402 (Monthly quota exceeded) and 439 (Too many requests and refresh cache).\n                failed.push(extracted);\n            }\n        }\n\n        if (payload.length > 0) {\n            this._onSuccess(payload, results.itemsAccepted);\n        }\n\n        if (failed.length > 0) {\n            this._onError(failed, this._formatErrorMessageXhr(null, ['partial success', results.itemsAccepted, 'of', results.itemsReceived].join(' ')));\n        }\n\n        if (retry.length > 0) {\n            this._resendPayload(retry);\n\n            this._logger.throwInternal(\n                LoggingSeverity.WARNING,\n                _InternalMessageId.TransmissionFailed, \"Partial success. \" +\n                \"Delivered: \" + payload.length + \", Failed: \" + failed.length +\n                \". Will retry to send \" + retry.length + \" our of \" + results.itemsReceived + \" items\");\n        }\n    }\n\n    /**\n     * success handler\n     */\n    public _onSuccess(payload: string[], countOfItemsInPayload: number) {\n        this._buffer.clearSent(payload);\n    }\n\n    /**\n     * xdr state changes\n     */\n    public _xdrOnLoad(xdr: IXDomainRequest, payload: string[]) {\n        if (xdr && (xdr.responseText + \"\" === \"200\" || xdr.responseText === \"\")) {\n            this._consecutiveErrors = 0;\n            this._onSuccess(payload, 0);\n        } else {\n            var results = this._parseResponse(xdr.responseText);\n\n            if (results && results.itemsReceived && results.itemsReceived > results.itemsAccepted\n                && !this._config.isRetryDisabled()) {\n                this._onPartialSuccess(payload, results);\n            } else {\n                this._onError(payload, this._formatErrorMessageXdr(xdr));\n            }\n        }\n    }\n\n    public static constructEnvelope(orig: ITelemetryItem, iKey: string, logger: IDiagnosticLogger): IEnvelope {\n        let envelope: ITelemetryItem;\n        if (iKey !== orig.iKey && !CoreUtils.isNullOrUndefined(iKey)) {\n            envelope = {\n                ...orig,\n                iKey: iKey\n            };\n        } else {\n            envelope = orig;\n        }\n\n        switch (envelope.baseType) {\n            case Event.dataType:\n                return EventEnvelopeCreator.EventEnvelopeCreator.Create(logger, envelope);\n            case Trace.dataType:\n                return TraceEnvelopeCreator.TraceEnvelopeCreator.Create(logger, envelope);\n            case PageView.dataType:\n                return PageViewEnvelopeCreator.PageViewEnvelopeCreator.Create(logger, envelope);\n            case PageViewPerformance.dataType:\n                return PageViewPerformanceEnvelopeCreator.PageViewPerformanceEnvelopeCreator.Create(logger, envelope);\n            case Exception.dataType:\n                return ExceptionEnvelopeCreator.ExceptionEnvelopeCreator.Create(logger, envelope);\n            case Metric.dataType:\n                return MetricEnvelopeCreator.MetricEnvelopeCreator.Create(logger, envelope);\n            case RemoteDependencyData.dataType:\n                return DependencyEnvelopeCreator.DependencyEnvelopeCreator.Create(logger, envelope);\n            default:\n                // default create custom event type\n                return EventEnvelopeCreator.EventEnvelopeCreator.Create(logger, envelope);\n        }\n    }\n\n    private static _getDefaultAppInsightsChannelConfig(): ISenderConfig {\n        let resultConfig = <ISenderConfig>{};\n\n        // set default values\n        resultConfig.endpointUrl = () => \"https://dc.services.visualstudio.com/v2/track\";\n        resultConfig.emitLineDelimitedJson = () => false;\n        resultConfig.maxBatchInterval = () => 15000;\n        resultConfig.maxBatchSizeInBytes = () => 102400; // 100kb\n        resultConfig.disableTelemetry = () => false;\n        resultConfig.enableSessionStorageBuffer = () => true;\n        resultConfig.isRetryDisabled = () => false;\n        resultConfig.isBeaconApiDisabled = () => true;\n        resultConfig.instrumentationKey = () => undefined; // Channel doesn't need iKey, it should be set already\n\n        return resultConfig;\n    }\n\n    private static _getEmptyAppInsightsChannelConfig(): ISenderConfig {\n        return {\n            endpointUrl: undefined,\n            emitLineDelimitedJson: undefined,\n            maxBatchInterval: undefined,\n            maxBatchSizeInBytes: undefined,\n            disableTelemetry: undefined,\n            enableSessionStorageBuffer: undefined,\n            isRetryDisabled: undefined,\n            isBeaconApiDisabled: undefined,\n            instrumentationKey: undefined\n        };\n    }\n\n    private static _validate(envelope: ITelemetryItem): boolean {\n        // call the appropriate Validate depending on the baseType\n        switch (envelope.baseType) {\n            case Event.dataType:\n                return EventValidator.EventValidator.Validate(envelope);\n            case Trace.dataType:\n                return TraceValidator.TraceValidator.Validate(envelope);\n            case Exception.dataType:\n                return ExceptionValidator.ExceptionValidator.Validate(envelope);\n            case Metric.dataType:\n                return MetricValidator.MetricValidator.Validate(envelope);\n            case PageView.dataType:\n                return PageViewValidator.PageViewValidator.Validate(envelope);\n            case PageViewPerformance.dataType:\n                return PageViewPerformanceValidator.PageViewPerformanceValidator.Validate(envelope);\n            case RemoteDependencyData.dataType:\n                return RemoteDepdencyValidator.RemoteDepdencyValidator.Validate(envelope);\n\n            default:\n                return EventValidator.EventValidator.Validate(envelope);\n        }\n    }\n\n    /**\n     * Send Beacon API request\n     * @param payload {string} - The data payload to be sent.\n     * @param isAsync {boolean} - not used\n     * Note: Beacon API does not support custom headers and we are not able to get\n     * appId from the backend for the correct correlation.\n     */\n    private _beaconSender(payload: string[], isAsync: boolean) {\n        var url = this._config.endpointUrl();\n        var batch = this._buffer.batchPayloads(payload);\n\n        // Chrome only allows CORS-safelisted values for the sendBeacon data argument\n        // see: https://bugs.chromium.org/p/chromium/issues/detail?id=720283\n        let plainTextBatch = new Blob([batch], { type: 'text/plain;charset=UTF-8' });\n\n        // The sendBeacon method returns true if the user agent is able to successfully queue the data for transfer. Otherwise it returns false.\n        var queued = navigator.sendBeacon(url, plainTextBatch);\n\n        if (queued) {\n            this._buffer.markAsSent(payload);\n        } else {\n            this._logger.throwInternal(LoggingSeverity.CRITICAL, _InternalMessageId.TransmissionFailed, \". \" + \"Failed to send telemetry with Beacon API.\");\n        }\n    }\n\n    /**\n     * Send XMLHttpRequest\n     * @param payload {string} - The data payload to be sent.\n     * @param isAsync {boolean} - Indicates if the request should be sent asynchronously\n     */\n    private _xhrSender(payload: string[], isAsync: boolean) {\n        var xhr = new XMLHttpRequest();\n        xhr[DisabledPropertyName] = true;\n        xhr.open(\"POST\", this._config.endpointUrl(), isAsync);\n        xhr.setRequestHeader(\"Content-type\", \"application/json\");\n\n        // append Sdk-Context request header only in case of breeze endpoint\n        if (Util.isInternalApplicationInsightsEndpoint(this._config.endpointUrl())) {\n            xhr.setRequestHeader(RequestHeaders.sdkContextHeader, RequestHeaders.sdkContextHeaderAppIdRequest);\n        }\n\n        xhr.onreadystatechange = () => this._xhrReadyStateChange(xhr, payload, payload.length);\n        xhr.onerror = (event: ErrorEvent) => this._onError(payload, this._formatErrorMessageXhr(xhr), event);\n\n        // compose an array of payloads\n        var batch = this._buffer.batchPayloads(payload);\n        xhr.send(batch);\n\n        this._buffer.markAsSent(payload);\n    }\n\n    /**\n     * Parses the response from the backend.\n     * @param response - XMLHttpRequest or XDomainRequest response\n     */\n    private _parseResponse(response: any): IBackendResponse {\n        try {\n            if (response && response !== \"\") {\n                var result = JSON.parse(response);\n\n                if (result && result.itemsReceived && result.itemsReceived >= result.itemsAccepted &&\n                    result.itemsReceived - result.itemsAccepted == result.errors.length) {\n                    return result;\n                }\n            }\n        } catch (e) {\n            this._logger.throwInternal(\n                LoggingSeverity.CRITICAL,\n                _InternalMessageId.InvalidBackendResponse,\n                \"Cannot parse the response. \" + Util.getExceptionName(e),\n                {\n                    response: response\n                });\n        }\n\n        return null;\n    }\n\n    /**\n     * Resend payload. Adds payload back to the send buffer and setup a send timer (with exponential backoff).\n     * @param payload\n     */\n    private _resendPayload(payload: string[], linearFactor: number = 1) {\n        if (!payload || payload.length === 0) {\n            return;\n        }\n\n        this._buffer.clearSent(payload);\n        this._consecutiveErrors++;\n\n        for (var item of payload) {\n            this._buffer.enqueue(item);\n        }\n\n        // setup timer\n        this._setRetryTime(linearFactor);\n        this._setupTimer();\n    }\n\n    /** Calculates the time to wait before retrying in case of an error based on\n     * http://en.wikipedia.org/wiki/Exponential_backoff\n     */\n    private _setRetryTime(linearFactor: number) {\n        const SlotDelayInSeconds = 10;\n        var delayInSeconds: number;\n\n        if (this._consecutiveErrors <= 1) {\n            delayInSeconds = SlotDelayInSeconds;\n        } else {\n            var backOffSlot = (Math.pow(2, this._consecutiveErrors) - 1) / 2;\n            // tslint:disable-next-line:insecure-random\n            var backOffDelay = Math.floor(Math.random() * backOffSlot * SlotDelayInSeconds) + 1;\n            backOffDelay = linearFactor * backOffDelay;\n            delayInSeconds = Math.max(Math.min(backOffDelay, 3600), SlotDelayInSeconds);\n        }\n\n        // TODO: Log the backoff time like the C# version does.\n        var retryAfterTimeSpan = Date.now() + (delayInSeconds * 1000);\n\n        // TODO: Log the retry at time like the C# version does.\n        this._retryAt = retryAfterTimeSpan;\n    }\n\n    /**\n     * Sets up the timer which triggers actually sending the data.\n     */\n    private _setupTimer() {\n        if (!this._timeoutHandle) {\n            var retryInterval = this._retryAt ? Math.max(0, this._retryAt - Date.now()) : 0;\n            var timerValue = Math.max(this._config.maxBatchInterval(), retryInterval);\n\n            this._timeoutHandle = setTimeout(() => {\n                this.triggerSend();\n            }, timerValue);\n        }\n    }\n\n    /**\n     * Checks if the SDK should resend the payload after receiving this status code from the backend.\n     * @param statusCode\n     */\n    private _isRetriable(statusCode: number): boolean {\n        return statusCode == 408 // Timeout\n            || statusCode == 429 // Too many requests.\n            || statusCode == 500 // Internal server error.\n            || statusCode == 503; // Service unavailable.\n    }\n\n    private _formatErrorMessageXhr(xhr: XMLHttpRequest, message?: string): string {\n        if (xhr) {\n            return \"XMLHttpRequest,Status:\" + xhr.status + \",Response:\" + xhr.responseText || xhr.response || \"\";\n        }\n\n        return message;\n    }\n\n    /**\n     * Send XDomainRequest\n     * @param payload {string} - The data payload to be sent.\n     * @param isAsync {boolean} - Indicates if the request should be sent asynchronously\n     *\n     * Note: XDomainRequest does not support sync requests. This 'isAsync' parameter is added\n     * to maintain consistency with the xhrSender's contract\n     * Note: XDomainRequest does not support custom headers and we are not able to get\n     * appId from the backend for the correct correlation.\n     */\n    private _xdrSender(payload: string[], isAsync: boolean) {\n        var xdr = new XDomainRequest();\n        xdr.onload = () => this._xdrOnLoad(xdr, payload);\n        xdr.onerror = (event: ErrorEvent) => this._onError(payload, this._formatErrorMessageXdr(xdr), event);\n\n        // XDomainRequest requires the same protocol as the hosting page.\n        // If the protocol doesn't match, we can't send the telemetry :(.\n        var hostingProtocol = window.location.protocol\n        if (this._config.endpointUrl().lastIndexOf(hostingProtocol, 0) !== 0) {\n            this._logger.throwInternal(\n                LoggingSeverity.WARNING,\n                _InternalMessageId.TransmissionFailed, \". \" +\n                \"Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.\");\n\n            this._buffer.clear();\n            return;\n        }\n\n        var endpointUrl = this._config.endpointUrl().replace(/^(https?:)/, \"\");\n        xdr.open('POST', endpointUrl);\n\n        // compose an array of payloads\n        var batch = this._buffer.batchPayloads(payload);\n        xdr.send(batch);\n\n        this._buffer.markAsSent(payload);\n    }\n\n    private _formatErrorMessageXdr(xdr: IXDomainRequest, message?: string): string {\n        if (xdr) {\n            return \"XDomainRequest,Response:\" + xdr.responseText || \"\";\n        }\n\n        return message;\n    }\n}\n","/// <reference path=\"./TestFramework/Common.ts\" />\nimport { Sender } from \"../src/Sender\";\nimport { Offline } from '../src/Offline';\nimport { Exception } from \"@microsoft/applicationinsights-common\";\nimport { ITelemetryItem, AppInsightsCore, ITelemetryPlugin, DiagnosticLogger } from \"@microsoft/applicationinsights-core-js\";\n\nexport class SenderTests extends TestClass {\n    private _sender: Sender;\n    private _instrumentationKey = 'iKey';\n\n    public testInitialize() {\n        this._sender = new Sender();\n        this._sender.initialize({ instrumentationKey: this._instrumentationKey }, new AppInsightsCore(), []);\n    }\n\n    public testCleanup() {\n        this._sender = null;\n    }\n\n    public registerTests() {\n\n        this.testCase({\n            name: \"Channel Config: Channel can properly take args from root config\",\n            test: () => {\n                this._sender.initialize(\n                    {\n                        instrumentationKey: 'abc',\n                        maxBatchInterval: 123,\n                        endpointUrl: 'https://example.com',\n                        maxBatchSizeInBytes: 654,\n                        extensionConfig: {\n                            [this._sender.identifier]: {\n                                maxBatchSizeInBytes: 456\n                            }\n                        }\n\n                    }, new AppInsightsCore(), []\n                );\n\n                Assert.equal(123, this._sender._config.maxBatchInterval(), 'Channel config can be set from root config (maxBatchInterval)');\n                Assert.equal('https://example.com', this._sender._config.endpointUrl(), 'Channel config can be set from root config (endpointUrl)');\n                Assert.notEqual(654, this._sender._config.maxBatchSizeInBytes(), 'Channel config does not equal root config option if extensionConfig field is also set');\n                Assert.equal(456, this._sender._config.maxBatchSizeInBytes(), 'Channel config prioritizes extensionConfig over root config');\n            }\n        });\n\n        this.testCase({\n            name: \"processTelemetry can be called with optional fields undefined\",\n            test: () => {\n                this._sender.initialize({\n                    instrumentationKey: 'abc'\n                }, new AppInsightsCore(), []);\n\n                const loggerSpy = this.sandbox.stub(this._sender, \"_setupTimer\");\n                const telemetryItem: ITelemetryItem = {\n                    name: 'fake item',\n                    iKey: 'iKey',\n                    baseType: 'some type',\n                    baseData: {}\n                };\n                try {\n                    this._sender.processTelemetry(telemetryItem);\n                } catch(e) {\n                    Assert.ok(false);\n                }\n\n                Assert.ok(loggerSpy.calledOnce);\n            }\n        })\n\n        this.testCase({\n            name: \"telemetry is not send when legacy telemetry initializer returns false\",\n            test: () => {\n                let cr = new AppInsightsCore();\n                cr.logger = new DiagnosticLogger({instrumentationKey: \"ikey\"});\n                this._sender.initialize({\n                    instrumentationKey: 'abc'\n                }, cr, []);\n\n                let nextPlugin = <ITelemetryPlugin> {\n                    identifier: \"foo\",\n                    processTelemetry: (it) => {},\n                    priority: 200,\n                    setNextPlugin: (it) => {}\n                };\n                this._sender.setNextPlugin(nextPlugin);\n\n                const processTelemetrySpy = this.sandbox.stub((<any>this._sender)._nextPlugin, \"processTelemetry\");\n                const telemetryItem: ITelemetryItem = {\n                    name: 'fake item',\n                    iKey: 'iKey',\n                    baseType: 'some type',\n                    baseData: {},\n                    tags: [   \n                    ]\n                };\n                \n                telemetryItem.tags[\"ProcessLegacy\"] = [e => true, e => false, f=> true];\n                try {\n                    this._sender.processTelemetry(telemetryItem);\n                } catch(e) {\n                    Assert.ok(false);\n                }\n\n                Assert.ok(!processTelemetrySpy.calledOnce);\n            }\n        })\n\n        this.testCase({\n            name: \"AppInsightsTests: AppInsights Envelope created for Custom Event\",\n            test: () => {\n                let inputEnvelope: ITelemetryItem = {\n                    name: \"test\",\n                    time: new Date(\"2018-06-12\").toISOString(),\n                    iKey: \"iKey\",\n                    ctx: {\n                        \"ai.session.id\": \"d041d2e5fa834b4f9eee41ac163bf402\",\n                        \"ai.device.id\": \"browser\",\n                        \"ai.device.type\": \"Browser\",\n                        \"ai.internal.sdkVersion\": \"javascript:1.0.18\",\n                    },\n                    tags: [{}],\n                    data: {\n                        \"property1\": \"val1\",\n                        \"measurement1\": 50.0,\n                        \"measurement2\": 1.3,\n                        \"property2\": \"val2\"\n                    },\n                    baseType: \"EventData\",\n                    baseData: {\n                        \"name\": \"Event Name\"\n                    }\n                };\n                let appInsightsEnvelope = Sender.constructEnvelope(inputEnvelope, this._instrumentationKey, null);\n\n                let baseData = appInsightsEnvelope.data.baseData;\n\n                // Assert measurements\n                let resultMeasurements = baseData.measurements;\n                Assert.ok(resultMeasurements);\n                Assert.ok(resultMeasurements[\"measurement1\"]);\n                Assert.equal(50.0, resultMeasurements[\"measurement1\"]);\n                Assert.ok(resultMeasurements[\"measurement2\"]);\n                Assert.equal(1.3, resultMeasurements[\"measurement2\"]);\n\n                // Assert custom properties\n                Assert.ok(baseData.properties);\n                Assert.equal(\"val1\", baseData.properties[\"property1\"]);\n                Assert.equal(\"val2\", baseData.properties[\"property2\"]);\n\n                // Assert Event name\n                Assert.ok(baseData.name);\n                Assert.equal(\"Event Name\", baseData.name);\n\n                // Assert ver\n                Assert.ok(baseData.ver);\n                Assert.equal(2, baseData.ver);\n\n                // Assert baseType\n                Assert.ok(appInsightsEnvelope.data.baseType);\n                Assert.equal(\"EventData\", appInsightsEnvelope.data.baseType);\n\n                // Assert tags\n                Assert.ok(appInsightsEnvelope.tags);\n                // Assert.equal(\"d041d2e5fa834b4f9eee41ac163bf402\", appInsightsEnvelope.tags[\"ai.session.id\"]);\n                // Assert.equal(\"browser\", appInsightsEnvelope.tags[\"ai.device.id\"]);\n                // Assert.equal(\"Browser\", appInsightsEnvelope.tags[\"ai.device.type\"]);\n                // Assert.equal(\"javascript:1.0.18\", appInsightsEnvelope.tags[\"ai.internal.sdkVersion\"]);\n\n                // Assert name\n                Assert.ok(appInsightsEnvelope.name);\n                Assert.equal(\"Microsoft.ApplicationInsights.iKey.Event\", appInsightsEnvelope.name);\n\n                // Assert iKey\n                Assert.ok(appInsightsEnvelope.iKey);\n                Assert.equal(\"iKey\", appInsightsEnvelope.iKey);\n\n                // Assert timestamp\n                Assert.ok(appInsightsEnvelope.time);\n            }\n        });\n\n        this.testCase({\n            name: \"AppInsightsTests: AppInsights Envelope created for Page View\",\n            test: () => {\n                // setup\n                let inputEnvelope: ITelemetryItem = {\n                    name: \"test\",\n                    time: new Date(\"2018-06-12\").toISOString(),\n                    iKey: \"iKey\",\n                    ctx: {\n                        \"User\": {\n                            \"localId\": \"TestId\",\n                            \"authId\": \"AuthenticatedId\",\n                            \"id\": \"TestId\"\n                        }\n                    },\n                    tags: [{\"User\": {\"AccountId\": \"TestAccountId\"} }],\n                    baseType: \"PageviewData\",\n                    baseData: {\n                        \"name\": \"Page View Name\",\n                        \"uri\": \"https://fakeUri.com\",\n                        properties: {\n                            \"property1\": \"val1\",\n                            \"property2\": \"val2\"\n                        },\n                        measurements: {\n                            \"measurement1\": 50.0,\n                            \"measurement2\": 1.3,\n                            \"duration\": 300000\n                        }\n                    }\n                };\n\n                // Act\n                let appInsightsEnvelope = Sender.constructEnvelope(inputEnvelope, this._instrumentationKey, null);\n                let baseData = appInsightsEnvelope.data.baseData;\n\n                // Assert duration\n                let resultDuration = baseData.duration;\n                Assert.equal(\"00:05:00.000\", resultDuration);\n\n                // Assert measurements\n                let resultMeasurements = baseData.measurements;\n                Assert.ok(resultMeasurements);\n                Assert.ok(resultMeasurements[\"measurement1\"]);\n                Assert.equal(50.0, resultMeasurements[\"measurement1\"]);\n                Assert.ok(resultMeasurements[\"measurement2\"]);\n                Assert.equal(1.3, resultMeasurements[\"measurement2\"]);\n                Assert.ok(!resultMeasurements.duration, \"duration is not supposed to be treated as measurement\");\n\n                // Assert custom properties\n                Assert.ok(baseData.properties);\n                Assert.equal(\"val1\", baseData.properties[\"property1\"]);\n                Assert.equal(\"val2\", baseData.properties[\"property2\"]);\n\n                // Assert Page View name\n                Assert.ok(baseData.name);\n                Assert.equal(\"Page View Name\", baseData.name);\n\n                // Assert ver\n                Assert.ok(baseData.ver);\n                Assert.equal(2, baseData.ver);\n\n                // Assert baseType\n                Assert.ok(appInsightsEnvelope.data.baseType);\n                Assert.equal(\"PageviewData\", appInsightsEnvelope.data.baseType);\n\n                // Assert tags\n                Assert.ok(appInsightsEnvelope.tags);\n                Assert.ok(\"TestAccountId\", appInsightsEnvelope.tags[\"ai.user.accountId\"]);\n                Assert.ok(\"AuthenticatedId\", appInsightsEnvelope.tags[\"ai.user.authUserId\"]);\n                Assert.ok(\"TestId\", appInsightsEnvelope.tags[\"ai.user.id\"]);\n\n                // Assert.equal(\"d041d2e5fa834b4f9eee41ac163bf402\", appInsightsEnvelope.tags[\"ai.session.id\"]);\n                // Assert.equal(\"browser\", appInsightsEnvelope.tags[\"ai.device.id\"]);\n                // Assert.equal(\"Browser\", appInsightsEnvelope.tags[\"ai.device.type\"]);\n                // Assert.equal(\"javascript:1.0.18\", appInsightsEnvelope.tags[\"ai.internal.sdkVersion\"]);\n\n                // Assert name\n                Assert.ok(appInsightsEnvelope.name);\n                Assert.equal(\"Microsoft.ApplicationInsights.iKey.Pageview\", appInsightsEnvelope.name);\n\n                // Assert iKey\n                Assert.ok(appInsightsEnvelope.iKey);\n                Assert.equal(\"iKey\", appInsightsEnvelope.iKey);\n\n                // Assert timestamp\n                Assert.ok(appInsightsEnvelope.time);\n            }\n        });\n\n        this.testCase({\n            name: 'Envelope: custom properties are put into envelope',\n            test: () => {\n                const inputEnvelope: ITelemetryItem = {\n                    name: \"test\",\n                    time: new Date(\"2018-06-12\").toISOString(),\n                    iKey: \"iKey\",\n                    baseType: Exception.dataType,\n                    baseData: {\n                        error: new Error(),\n                        properties: {\n                            \"property1\": \"val1\",\n                            \"property2\": \"val2\"\n                        },\n                        measurements: {\n                            \"measurement1\": 50.0,\n                            \"measurement2\": 1.3\n                        }\n                    },\n                    data: {\n                        \"property3\": \"val3\",\n                        \"measurement3\": 3.0\n                    },\n                    ctx: {\n                        \"User\": {\n                            \"localId\": \"TestId\",\n                            \"authId\": \"AuthenticatedId\",\n                            \"id\": \"TestId\"\n                        }\n                    },\n                    tags: [{\"User\": {\"AccountId\": \"TestAccountId\"} }],\n                };\n\n                // Act\n                let appInsightsEnvelope = Sender.constructEnvelope(inputEnvelope, this._instrumentationKey, null);\n                let baseData = appInsightsEnvelope.data.baseData;\n\n                Assert.equal(-1, JSON.stringify(baseData).indexOf(\"property3\"), \"ExceptionData: searching: customProperties (item.data) are not added to telemetry envelope\")\n                Assert.equal(\"val1\", baseData.properties[\"property1\"], \"ExceptionData: properties (item.baseData.properties) are added to telemetry envelope\");\n                Assert.equal(50.0, baseData.measurements[\"measurement1\"], \"ExceptionData: measurements (item.baseData.measurements) are added to telemetry envelope\");\n\n            }\n        });\n\n        this.testCase({\n            name: 'Offline watcher is listening to events',\n            test: () => {\n                Assert.ok(Offline.isListening, 'Offline is listening');\n                Assert.equal(true, Offline.isOnline(), 'Offline reports online status');\n                Assert.equal(false, Offline.isOffline(), 'Offline reports offline status');\n            }\n        });\n\n        this.testCase({\n            name: 'Offline watcher responds to offline events (window.addEventListener)',\n            test: () => {\n                // Setup\n                const offlineEvent = new Event('offline');\n                const onlineEvent = new Event('online');\n\n                // Verify precondition\n                Assert.ok(Offline.isListening);\n                Assert.ok(Offline.isOnline());\n\n                // Act - Go offline\n                window.dispatchEvent(offlineEvent);\n                this.clock.tick(1);\n\n                // Verify offline\n                Assert.ok(Offline.isOffline());\n\n                // Act - Go online\n                window.dispatchEvent(onlineEvent);\n                this.clock.tick(1);\n\n                // Verify online\n                Assert.ok(Offline.isOnline());\n            }\n        });\n    }\n}\n","import { SenderTests } from \"../Sender.tests\";\n\nexport function runTests() {\n    new SenderTests().registerTests();\n}"]}